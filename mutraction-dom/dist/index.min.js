"use strict";var M=Symbol("RecordMutation"),G=Symbol("TrackerOf"),j=Symbol("ProxyOf"),ne=Symbol("RecordDependency"),Se=Symbol("GetOriginal"),F=Symbol("AccessPath"),q="mu:debugMode",re=250,v=!!sessionStorage.getItem(q);function Ee(){sessionStorage.setItem(q,"true"),location.reload()}Object.assign(window,{[Symbol.for("mutraction.debug")]:Ee}),["localhost","127.0.0.1","[::1]"].includes(location.hostname)&&!v&&(console.info("[\xB5] Try the mutraction diagnostic tool.  This message is only shown from localhost, but the tool is always available."),console.info("\xBB window[Symbol.for('mutraction.debug')]()"));function Ae(){sessionStorage.removeItem(q),location.reload()}function Te(e){return Array.isArray(e)?`Array(${e.length})`:typeof e=="object"?"{ ... }":JSON.stringify(e)}function se(e){const t=I(e.object),n=t?t+"."+String(e.prop):String(e.prop),s=Te(e.current),o=e.subscribers.size,c=`(${o} ${o===1?"subscriber":"subscribers"})`;return m("li",{},m("code",{},n),": ",s," ",c)}function m(e,t,...n){const s=document.createElement(e);return s.style.all="revert",Object.assign(s.style,t),s.append(...n),s}function oe(e){const t=Array.from(e.childNodes).filter(n=>n instanceof Text).flatMap(n=>ye(n)).filter(Boolean).map(n=>n);return(ye(e)??[]).concat(...t)}if(v){let e=function(){const w=[];for(const T of N)w.push(se(T));l.replaceChildren(...w)},t=function(){b.disabled=!0,b.textContent="\u2026",E.textContent="(choose)";let w,T="";function L(P){if(P.target instanceof HTMLElement){let k=P.target;for(;k&&(oe(k)?.length??0)===0;)k=k.parentElement;k!=w&&(w&&(w.style.boxShadow=T),T=k?.style.boxShadow??"",k&&(k.style.boxShadow?k.style.boxShadow+=", inset #f0f4 0 99vmax":k.style.boxShadow+="inset #f0f4 0 99vmax"),w=k)}P.stopPropagation()}document.addEventListener("mousemove",L,{capture:!0}),document.addEventListener("click",P=>{if(b.disabled=!1,b.textContent="\u{1F50D}",document.removeEventListener("mousemove",L,{capture:!0}),w){w.style.boxShadow=T,E.textContent=w.tagName.toLowerCase();const k=oe(w),xe=new Set(k.flatMap(U=>U.trackedProperties)),te=[];for(const U of xe)te.push(se(U));D.replaceChildren(...te)}else E.textContent="(none)",D.replaceChildren()},{capture:!0,once:!0})};Pe=e,Oe=t;const n=m("div",{position:"fixed",top:"50px",left:"50px",width:"30em",height:"20em",resize:"both",minHeight:"1.6em",minWidth:"15em",zIndex:"2147483647",background:"#eee",color:"#123",boxShadow:"#000 0em 0.5em 1em",border:"solid #345 0.4em",fontSize:"16px",display:"flex",flexDirection:"column",overflow:"auto"}),s=m("button",{marginRight:"1em"},"_");let o=!1;s.addEventListener("click",w=>{(o=!o)?(n.style.maxHeight="1.6em",n.style.maxWidth="15em"):(n.style.maxHeight="",n.style.maxWidth="")});const c=m("button",{float:"right"},"\xD7");c.addEventListener("click",Ae);const h=m("div",{fontWeight:"bold",background:"#123",color:"#eee",padding:"0.1em 1em",cursor:"grab"},c,s,"\u03BC diagnostics"),u=m("span",{},"0"),y=m("p",{},m("p",{},m("strong",{},"Active effects: "),u));setInterval(()=>{u.innerText=String(We())},re);const g=m("button",{},"Undo"),r=m("button",{},"Redo"),i=m("p",{},m("strong",{},"History: "),g,r);g.addEventListener("click",()=>C.undo()),r.addEventListener("click",()=>C.redo());const a=m("span",{},"0"),f=m("button",{},"\u21BB");f.addEventListener("click",e);const p=m("div",{},m("strong",{},"Live PropRefs: "),a," ",f),l=m("ol",{});let d=-1;setInterval(()=>{N.generation!==d&&(a.replaceChildren(String(N.sizeBound)),e(),d=N.generation)},re);const b=m("button",{},"\u{1F50D}");b.addEventListener("click",t);const E=m("span",{},"(none)"),D=m("ol",{}),ve=m("div",{padding:"1em",overflow:"auto"},y,i,p,l,b," ",m("strong",{},"Inspected node:")," ",E,D);n.append(h,ve),document.body.append(n);let V=0,ee=0;h.addEventListener("mousedown",w=>{const T=n.getBoundingClientRect();V=w.x-T.x,ee=w.y-T.y,window.addEventListener("mousemove",L),document.body.addEventListener("mouseup",P=>{window.removeEventListener("mousemove",L)},{once:!0}),w.preventDefault();function L(P){n.style.left=P.x-V+"px",n.style.top=P.y-ee+"px"}})}var Pe,Oe,Re=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"];function Ce(e){return typeof e=="string"?ie(e):typeof e=="number"&&(e&2147483647)===e}function ie(e){return typeof e!="string"||!/^\d{1,10}$/.test(e)?!1:parseInt(e,10)<2147483647}function De(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function ce(e,t){Object.defineProperty(e,j,{enumerable:!1,writable:!0,configurable:!1}),e[j]=t}var ae=new Set([RegExp,Promise]);"window"in globalThis&&ae.add(globalThis.window.constructor);function J(e){return!(e==null||typeof e!="object"||H(e)||!Object.isExtensible(e)||ae.has(e.constructor))}function I(e){return e[F]}function le(e,t){Object.assign(e,{[F]:t})}function K(e,t){function n(r,i,a){if(i===G)return t;if(i===Se)return r;if(i===F)return r[i];t[ne](x(r,i));let f=Reflect.get(r,i,a);if(f&&typeof f=="object"&&v){const l=I(r),d=l?l+"."+String(i):String(i);le(f,d)}if(J(f)){const l=f[j];if(l){if(l[G]!==t)throw Error("Object cannot be tracked by multiple tracker instances");f=l}else{const d=f,b=K(d,t);f=r[i]=new Proxy(d,b),ce(d,f)}}if(typeof f=="function"&&t.options.autoTransactionalize&&i!=="constructor"){let l=function(){const b=t.startTransaction(d.name??"auto");try{return d.apply(a,arguments)}finally{b.operations.length>0?t.commit(b):t.rollback(b)}};var p=l;const d=f;return l}return f}function s(r,i,a){if(typeof i=="string"&&Re.includes(i)){let p=function(){const d=t.startTransaction(String(i)),b=l.apply(a,arguments);return t.commit(d),b};var f=p;const l=r[i];return p}else return n(r,i,a)}let o=0;function c(r,i,a,f){if(i===F)return Reflect.set(r,F,a);if(a&&typeof a=="object"&&v){const b=(I(r)??"~")+"."+String(i);le(a,b)}if(J(a)){const b=K(a,t);a=new Proxy(a,b)}const p=i in r?{type:"change",target:r,name:i,oldValue:e[i],newValue:a,timestamp:new Date}:{type:"create",target:r,name:i,newValue:a,timestamp:new Date},l=o,d=Reflect.set(r,i,a,f);return d&&l==o++&&t[M](p),d}function h(r,i,a,f){if(!Array.isArray(r))throw Error("This object used to be an array.  Expected an array.");if(i==="length"){Ce(a)||(r.length=a);const p=r.length,l=parseInt(a,10);if(l<p){const d=Object.freeze(r.slice(l,p)),b={type:"arrayshorten",target:r,name:i,oldLength:p,newLength:l,removed:d,timestamp:new Date},E=Reflect.set(r,i,a,f);return t[M](b),++o,E}}if(ie(i)){const p=parseInt(i,10);if(p>=r.length){const l={type:"arrayextend",target:r,name:i,oldLength:r.length,newIndex:p,newValue:a,timestamp:new Date},d=Reflect.set(r,i,a,f);return t[M](l),++o,d}}return c(r,i,a,f)}function u(r,i){const a={type:"delete",target:r,name:i,oldValue:e[i],timestamp:new Date},f=Reflect.deleteProperty(r,i);return f&&t[M](a),f}let y=c,g=n;if(Array.isArray(e)&&(y=h,t.options.trackHistory&&(g=s)),De(e))throw Error("Tracking of exotic arguments objects not supported");return{get:g,set:y,deleteProperty:u}}function H(e){return typeof e=="object"&&!!e[G]}var Le=class{get sizeBound(){return this.#e}#e=0;get generation(){return this.#t}#t=0;items=new Map;registry=new FinalizationRegistry(e=>{--this.#e,this.items.delete(e),++this.#t});add(e){this.registry.register(e,this.#e),this.items.set(this.#e++,new WeakRef(e)),++this.#t}*[Symbol.iterator](){for(const e of this.items.values()){const t=e.deref();t&&(yield t)}}},N=v?new Le:null,fe=class{object;prop;#e=new Set;#t=!1;get subscribers(){return this.#e}constructor(e,t){!H(e)&&e[j]&&(e=e[j]),this.object=e,this.prop=t,N?.add(this)}subscribe(e){return this.#e.add(e),{dispose:()=>this.#e.delete(e)}}notifySubscribers(){this.#t&&console.warn(`Re-entrant property subscription for '${String(this.prop)}'`);const e=Array.from(this.#e);this.#t=!0;for(const t of e)t.notifySubscribers(this);this.#t=!1}get current(){return this.object[this.prop]}set current(e){this.object[this.prop]=e}},ue=new WeakMap;function x(e,t){let n=ue.get(e);n||ue.set(e,n=new Map);let s=n.get(t);return s||n.set(t,s=new fe(e,t)),s}var Me=class{#e=new Map;#t;#n=!1;#r=new Set;active=!0;constructor(e){this.#t=e}get trackedProperties(){return Array.from(this.#e.keys())}addDependency(e){if(this.active&&!this.#n){if(this.#e.has(e))return;const t=e.subscribe(this);this.#e.set(e,t)}}subscribe(e){return this.#r.add(e),{dispose:()=>this.#r.delete(e)}}notifySubscribers(e){const t=Array.from(this.#r);for(const n of t)n(e)}endDependencyTrack(){this.#t.endDependencyTrack(this)}trackAllChanges(){if(this.#n)return;this.untrackAll();const e=x(this.#t,"history");this.addDependency(e),this.#n=!0}untrackAll(){for(const e of this.#e.values())e.dispose();this.#e.clear()}};function je({operations:e}){for(let t=0;t<e.length;){const n=e[t];if(n.type==="transaction")e.splice(t,1,...n.operations);else if(n.type==="change"&&Object.is(n.oldValue,n.newValue))e.splice(t,1);else if(t>0){const s=e[t-1];if(s.type==="transaction")throw Error("Internal mutraction error.  Found internal transaction on look-back during packTransaction.");s.target!==n.target||s.name!==n.name?++t:s.type==="create"&&n.type==="change"?e.splice(--t,2,{...s,newValue:n.newValue}):s.type==="create"&&n.type==="delete"?e.splice(--t,2):s.type==="change"&&n.type==="change"?e.splice(--t,2,{...s,newValue:n.newValue}):s.type==="change"&&n.type==="delete"?e.splice(--t,2,{...n,oldValue:s.oldValue}):s.type==="delete"&&n.type==="create"?e.splice(--t,2,{...n,...s,type:"change"}):++t}else++t}}var pe={trackHistory:!0,autoTransactionalize:!0,compactOnCommit:!0},de=class{#e;#t;#n=[];#r=!1;#s=[];options=pe;#o;constructor(e={}){this.setOptions(e)}setOptions(e={}){if(this.#r)throw Error("Cannot change options for a tracker that has already started tracking");e.trackHistory===!1&&(e.compactOnCommit=!1,e.autoTransactionalize??=!1);const t={...pe,...e};if(t.compactOnCommit&&!t.trackHistory)throw Error("Option compactOnCommit requires option trackHistory");t.trackHistory?this.#t=[]:this.#t=void 0,this.options=Object.freeze(t)}track(e){if(H(e))throw Error("Object already tracked");if(this.#r=!0,!J)throw Error("This object type cannot be proxied");const t=new Proxy(e,K(e,this));return ce(e,t),t}trackAsReadonlyDeep(e){return this.track(e)}#c(){if(!this.options.trackHistory)throw Error("History tracking disabled.")}get history(){if(this.#c(),this.#s[0]?.trackAllChanges(),this.#o??=x(this,"history"),!this.#t)throw Error("History tracking enabled, but no root transaction. Probably mutraction internal error.");return this.#t}startTransaction(e){return this.#e={type:"transaction",parent:this.#e,operations:[],dependencies:new Set,timestamp:new Date},e&&(this.#e.transactionName=e),this.#e}commit(e){if(!this.#e)throw Error("Attempted to commit transaction when none were open.");if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.options.compactOnCommit&&je(this.#e),this.#e.parent)this.#e.parent.operations.push(this.#e),this.#e.dependencies.forEach(t=>this.#e.parent.dependencies.add(t)),this.#e=this.#e.parent;else{this.#t?.push(this.#e);const t=new Set;for(const n of this.#e.dependencies)for(const s of n.subscribers)t.add(s);for(const n of t)n.notifySubscribers();this.#e=void 0}this.#e==null&&this.#o?.notifySubscribers()}rollback(e){if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.#e){for(;this.#e.operations.length;)this.undo();this.#e=this.#e.parent}else for(;this.#t?.length;)this.undo()}undo(){this.#c();const e=(this.#e?.operations??this.#t).pop();e&&(this.#l(e),this.#n.unshift(e),this.#e==null&&this.#o?.notifySubscribers())}#l(e){if(e.type==="transaction")for(let t=e.operations.length;t-- >0;)this.#l(e.operations[t]);else{const t=e.target;switch(e.type){case"change":case"delete":t[e.name]=e.oldValue;break;case"create":delete t[e.name];break;case"arrayextend":t.length=e.oldLength;break;case"arrayshorten":t.push(...e.removed);break;default:}this.#e||(x(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&x(e.target,"length").notifySubscribers())}}redo(){this.#c();const e=this.#n.shift();e&&(this.#f(e),(this.#e?.operations??this.#t).push(e),this.#e==null&&this.#o?.notifySubscribers())}#f(e){if(e.type==="transaction")for(const t of e.operations)this.#f(t);else{const t=e.target;switch(e.type){case"change":case"create":t[e.name]=e.newValue;break;case"delete":delete t[e.name];break;case"arrayextend":t[e.newIndex]=e.newValue;break;case"arrayshorten":t.length=e.newLength;break;default:}this.#e||(x(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&x(e.target,"length").notifySubscribers())}}clearRedos(){this.#n.length=0}clearHistory(){this.#c(),this.#e=void 0,this.#t.length=0,this.clearRedos()}[M](e){this.options.trackHistory&&(v&&(e.targetPath=I(e.target)),(this.#e?.operations??this.#t).push(Object.freeze(e))),this.clearRedos(),this.#e?(this.#e.dependencies.add(x(e.target,e.name)),(e.type==="arrayextend"||e.type==="arrayshorten")&&this.#e.dependencies.add(x(e.target,"length"))):(x(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&x(e.target,"length").notifySubscribers(),this.#o?.notifySubscribers())}ignoreUpdates(e){const t=this.startDependencyTrack();t.active=!1,e(),t.endDependencyTrack()}startDependencyTrack(){const e=new Me(this);return this.#s.unshift(e),e}endDependencyTrack(e){if(this.#s[0]!==e)throw Error("Specified dependency list is not top of stack");return this.#s.shift(),e}[ne](e){this.#a?this.#i=e:this.#s[0]?.addDependency(e)}#a=!1;#i=void 0;getPropRef(e){const t=this.getPropRefTolerant(e);if(!t)throw Error("No tracked properties.  Prop ref detection requires a tracked object.");return t}getPropRefTolerant(e){if(this.#a)throw Error("Cannot be called re-entrantly.");this.#a=!0,this.#i=void 0;try{const t=e();if(!this.#i)return;const n=this.#i.current;return Object.is(t,n)||console.error("The last operation of the callback must be a property get.\n`(foo || bar).quux` is allowed, but `foo.bar + 1` is not"),this.#i}finally{this.#a=!1}}},C=new de;function Fe(e){return C.track(e)}var Ne={dispose:()=>{}},$=0;function We(){return $}function S(e,t={}){const{tracker:n=C,suppressUntrackedWarning:s=!1}=t;let o=n.startDependencyTrack(),c;try{c=e(o)}finally{o.endDependencyTrack()}if(o.trackedProperties.length===0)return s||console.warn("effect() callback has no dependencies on any tracked properties.  It will not fire again."),Ne;++$;let h=o.subscribe(g),u=!1;function y(){u&&console.error("Effect already disposed"),u=!0,o.untrackAll(),h.dispose(),--$}function g(r){typeof c=="function"&&c(),y(),u=!1,o=n.startDependencyTrack(),c=e(o,r),o.endDependencyTrack(),h=o.subscribe(g),++$}return{dispose:y}}var _=new WeakMap;function O(e,t){const n=_.get(e);n?n.push(t):_.set(e,[t])}function W(e){_.get(e)?.forEach(n=>n.dispose()),e instanceof Element&&e.childNodes.forEach(n=>W(n))}var B={suppressUntrackedWarning:!0};function Ie(e){return e!=null&&typeof e=="object"&&"$muType"in e&&typeof e.$muType=="string"}function he(e,t){if(Array.isArray(t)){t.forEach(n=>he(e,n));return}if(!Ie(t))throw Error("Expected a node modifier for 'mu:apply', but got "+typeof t);switch(t.$muType){case"attribute":e.setAttribute(t.name,t.value);break;default:throw Error("Unknown node modifier type: "+t.$muType)}}var Q=new WeakMap;function R(e,t){if(t.trackedProperties.length===0)return;let n=Q.get(e);n||Q.set(e,n=[]),n.push(t)}function ye(e){return Q.get(e)}function He(e,t,n,...s){const o=document.createElement(e);o.append(...s);let c,h=!1,u=0,y=!1;for(let[r,i]of Object.entries(t))switch(r){case"mu:syncEvent":c=i;break;case"mu:apply":he(o,i);break;case"mu:diagnostic":h=!0;break;default:o[r]=i;break}h&&console.trace(`[mu:diagnostic] Creating ${e}`);const g=c?[]:void 0;for(let[r,i]of Object.entries(n)){if(g&&r in o){const a=C.getPropRefTolerant(i);a&&g.push([r,a])}switch(r){case"style":{const f=S(h?function(l,d){y&&console.trace(`[mu:diagnostic] Updating ${e}`,{attribute:r,trigger:d,updates:++u}),Object.assign(o.style,i()),v&&R(o,l)}:function(l){Object.assign(o.style,i()),v&&R(o,l)},B);O(o,f);break}case"classList":{const f=S(h?function(l,d){y&&console.trace(`[mu:diagnostic] Updating ${e}`,{attribute:r,trigger:d,updates:++u});const b=i();for(const[E,D]of Object.entries(b))o.classList.toggle(E,!!D);v&&R(o,l)}:function(l){const d=i();for(const[b,E]of Object.entries(d))o.classList.toggle(b,!!E);v&&R(o,l)},B);O(o,f);break}default:{const f=S(h?function(l,d){y&&console.trace(`[mu:diagnostic] Updating ${e}`,{attribute:r,trigger:d,updates:++u}),o[r]=i(),v&&R(o,l)}:function(l){o[r]=i(),v&&R(o,l)},B);O(o,f);break}}}if(c&&g?.length)for(const r of c.matchAll(/\S+/g))o.addEventListener(r[0],()=>{for(const[i,a]of g)a.current=o[i]});return y=!0,o}function $e(e){let t=document.createTextNode(""),n;return n=S(function(o){const c=e();if(c instanceof Node)o.untrackAll(),t=c;else{const h=document.createTextNode(String(c??""));n&&O(h,n),t.replaceWith(h),t=h,v&&R(t,o)}},B),O(t,n),t}var A=class{static id=0;startMarker=document.createTextNode("");endMarker=document.createTextNode("");constructor(...e){document.createDocumentFragment().append(this.startMarker,...e,this.endMarker)}removeAsFragment(){if(this.startMarker.parentNode instanceof DocumentFragment)return this.startMarker.parentNode;const e=[];for(let n=this.startMarker;;n=n?.nextSibling){if(n==null)throw Error("End marker not found as subsequent document sibling as start marker");if(e.push(n),Object.is(n,this.endMarker))break}const t=document.createDocumentFragment();return t.append(...e),t}emptyAsFragment(){const e=[];for(let n=this.startMarker.nextSibling;;n=n?.nextSibling){if(n==null)throw Error("End marker not found as subsequent document sibling as start marker");if(Object.is(n,this.endMarker))break;e.push(n)}const t=document.createDocumentFragment();return t.append(...e),t}replaceWith(...e){this.emptyAsFragment(),this.append(...e)}append(...e){const t=document.createDocumentFragment();if(t.append(...e),!this.endMarker.parentNode)throw Error("End marker of ElementSpan has no parent");this.endMarker.parentNode.insertBefore(t,this.endMarker)}registerCleanup(e){O(this.startMarker,e)}cleanup(){W(this.startMarker);for(const e of this.emptyAsFragment().childNodes)W(e)}};function ge(e){return e!=null&&typeof e=="object"&&"node"in e&&e.node instanceof Node}function X(e){const t=new A,n=S(function(o){for(const h of t.emptyAsFragment().childNodes)W(h);const c=e();if(ge(c))return t.replaceWith(c.node),c.cleanup;if(c!=null){t.replaceWith(c);return}});return t.registerCleanup(n),t.removeAsFragment()}var z={suppressUntrackedWarning:!0};function be(e,t){if(typeof e=="function")return X(()=>be(e(),t));const n=new A,s=[],o=e??[],c=S(function(y){for(let g=s.length;g<o.length;g++){const r={container:new A};s.push(r),r.subscription=S(function(a){r.cleanup?.(),r.container.cleanup();const f=o[g],p=f!==void 0?t(f,g,o):document.createTextNode("");ge(p)?(r.container.replaceWith(p.node),r.cleanup=p.cleanup):p!=null&&(r.container.replaceWith(p),r.cleanup=void 0)},z),n.append(r.container.removeAsFragment())}for(;s.length>o.length;)h(s.pop())},z);return n.registerCleanup({dispose(){s.forEach(h)}}),n.registerCleanup(c),n.removeAsFragment();function h({cleanup:u,container:y,subscription:g}){u?.(),g?.dispose(),y.removeAsFragment(),y.cleanup()}}function me(e,t){if(typeof e=="function")return X(()=>me(e(),t));const n=new A,s=[],o=new WeakMap,c=e??[],h=S(function(g){for(let r=s.length;r<c.length;r++){const i=new A;s.push(i),S(function(f){i.emptyAsFragment();const p=c[r];if(p==null)return;if(typeof p!="object")throw Error("Elements must be object in ForEachPersist");let l=o.get(p);if(l==null){f&&(f.active=!1);try{const d=t(p);l=d instanceof HTMLElement?d:new A(d),o.set(p,l)}finally{f&&(f.active=!0)}}l instanceof HTMLElement?i.replaceWith(l):l!=null&&i.replaceWith(l.removeAsFragment())},z),n.append(i.removeAsFragment())}for(;s.length>c.length;)u(s.pop())},z);return n.registerCleanup({dispose(){s.forEach(u)}}),n.registerCleanup(h),n.removeAsFragment();function u(y){y.removeAsFragment(),y.cleanup()}}var Be={suppressUntrackedWarning:!0};function Y(){return document.createTextNode("")}function ze(...e){let t=Y(),n=Y,s=!1;function o(){s||c.dispose()}const c=S(function(){let u;for(const{nodeGetter:y,conditionGetter:g}of e)if(!g||g()){u=y;break}if(u??=Y,u!==n){s=!0,W(t),s=!1,n=u;const y=n();t.replaceWith(y),O(y,{dispose:o}),t=y}},Be);return t}function Ue(e){return document.createTextNode(String(e))}function Ge(e,t=document.createTextNode(""),n=Ue){const s=new A(t);return e.then(o=>s.replaceWith(o)),e.catch(o=>s.replaceWith(typeof n=="function"?n(o):n)),s.removeAsFragment()}var we=new WeakMap;function qe(...e){if(e.some(c=>"pattern"in c&&c.pattern instanceof RegExp&&c.pattern.global))throw Error("Global-flagged route patterns not supported");const t=new A;let n,s=!1;function o(c){const{hash:h}=new URL(c);for(const u of e){let y,g=!1;if("pattern"in u?typeof u.pattern=="string"?g=h===u.pattern:g=!!(y=u.pattern.exec(h)??void 0):g=!0,g){s?n?.cleanup():n?.removeAsFragment(),n=void 0;const{element:r}=u;s=typeof r=="function";const i=typeof r=="function"?r(y):r;if(i instanceof DocumentFragment){let a=we.get(i);a||we.set(i,a=new A(i)),n=a,t.replaceWith(a.removeAsFragment())}else n=void 0,t.replaceWith(i);u.suppressScroll||window.scrollTo(0,0);return}}t.emptyAsFragment()}return window.addEventListener("hashchange",c=>o(c.newURL)),o(location.href),t.removeAsFragment()}var ke="data-mu-style",Je=String(Math.random()*1e6|0),Ke=0;function _e(e){const t=new CSSStyleSheet,n=Je+"-"+ ++Ke;for(const[s,o]of Object.entries(e)){const c=`[${ke}="${n}"]`,h=`${c}:is(${s}), ${c} :is(${s}) {}`;t.insertRule(h,0);const u=t.cssRules.item(0);Object.assign(u.style,o)}return document.adoptedStyleSheets.push(t),{$muType:"attribute",name:ke,value:n}}function Qe(e,t=10){return Z(e,t)}function Z(e,t){if(t<0)throw Error("Maximum depth exceeded.  Maybe there's a reference cycle?");if(typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>Z(s,t-1));if(e.constructor&&e.constructor!==Object)throw Error("Can't clone objects with a prototype chain or instances of classes");return Object.fromEntries(Object.entries(e).map(([n,s])=>[n,Z(s,t-1)]))}var Xe="0.22.4";export{be as ForEach,me as ForEachPersist,Ge as PromiseLoader,fe as PropReference,qe as Router,X as Swapper,de as Tracker,$e as child,ze as choose,x as createOrRetrievePropRef,C as defaultTracker,S as effect,He as element,H as isTracked,_e as makeLocalStyle,Fe as track,Qe as untrackedClone,Xe as version};
