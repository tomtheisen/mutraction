"use strict";var M=Symbol("RecordMutation"),K=Symbol("TrackerOf"),N=Symbol("ProxyOf"),se=Symbol("RecordDependency"),Ae=Symbol("GetOriginal"),j=Symbol("AccessPath"),_="mu:debugMode",oe=250,A=!!sessionStorage.getItem(_);function Te(){sessionStorage.setItem(_,"true"),location.reload()}Object.assign(window,{[Symbol.for("mutraction.debug")]:Te}),["localhost","127.0.0.1","[::1]"].includes(location.hostname)&&!A&&(console.info("[\xB5] Try the mutraction diagnostic tool.  This message is only shown from localhost, but the tool is always available."),console.info("\xBB window[Symbol.for('mutraction.debug')]()"));function Pe(){sessionStorage.removeItem(_),location.reload()}function Oe(e){return Array.isArray(e)?`Array(${e.length})`:typeof e=="object"?"{ ... }":JSON.stringify(e)}function g(e,t,...r){const n=document.createElement(e);return n.style.all="revert",Object.assign(n.style,t),n.append(...r),n}function ie(e){const t=Array.from(e.childNodes).filter(r=>r instanceof Text).flatMap(r=>ge(r)).filter(Boolean).map(r=>r);return(ge(e)??[]).concat(...t)}if(A){let e=function(m){const x=B(m.object),O=x?x+"."+String(m.prop):String(m.prop),v=m.current,k=Oe(v),H=!v||typeof v!="object",L=g("span",H?{cursor:"pointer",textDecoration:"underline"}:{},k),C=m.subscribers.size,xe=`(${C} ${C===1?"subscriber":"subscribers"})`,Ee=g("li",{},g("code",{},O),": ",L," ",xe);return H&&L.addEventListener("click",()=>{const ne=prompt(`Update ${String(m.prop)}`,k);try{ne&&(m.current=JSON.parse(ne)),t()}catch{}}),Ee},t=function(){const m=[];for(const x of F)m.push(e(x));y.replaceChildren(...m)},r=function(){P.disabled=!0,P.textContent="\u2026",I.textContent="(choose)";let m,x="";function O(v){if(v.target instanceof HTMLElement){let k=v.target;for(;k&&(ie(k)?.length??0)===0;)k=k.parentElement;k!=m&&(m&&(m.style.boxShadow=x),x=k?.style.boxShadow??"",k&&(k.style.boxShadow?k.style.boxShadow+=", inset #f0f4 0 99vmax":k.style.boxShadow+="inset #f0f4 0 99vmax"),m=k)}v.stopPropagation()}document.addEventListener("mousemove",O,{capture:!0}),document.addEventListener("click",v=>{if(v.stopPropagation(),v.preventDefault(),P.disabled=!1,P.textContent="\u{1F50D}",document.removeEventListener("mousemove",O,{capture:!0}),m){m.style.boxShadow=x,I.textContent=m.tagName.toLowerCase();const k=ie(m),H=new Set(k.flatMap(C=>C.trackedProperties)),L=[];for(const C of H)L.push(e(C));J.replaceChildren(...L)}else I.textContent="(none)",J.replaceChildren()},{capture:!0,once:!0})};Re=e,Ce=t,De=r;const n=g("div",{position:"fixed",top:"50px",left:"50px",width:"30em",height:"20em",resize:"both",minHeight:"1.6em",minWidth:"15em",zIndex:"2147483647",background:"#eee",color:"#123",boxShadow:"#000 0em 0.5em 1em",border:"solid #345 0.4em",fontSize:"16px",display:"flex",flexDirection:"column",overflow:"auto"}),i=g("button",{marginRight:"1em"},"_");let c=!1;i.addEventListener("click",m=>{(c=!c)?(n.style.maxHeight="1.6em",n.style.maxWidth="15em"):(n.style.maxHeight="",n.style.maxWidth="")});const u=g("button",{float:"right"},"\xD7");u.addEventListener("click",Pe);const d=g("div",{fontWeight:"bold",background:"#123",color:"#eee",padding:"0.1em 1em",cursor:"grab"},u,i,"\u03BC diagnostics"),h=g("span",{},"0"),b=g("p",{},g("p",{},g("strong",{},"Active effects: "),h));setInterval(()=>{h.innerText=String(Be())},oe);const s=g("button",{},"Undo"),o=g("button",{},"Redo"),a=g("p",{},g("strong",{},"History: "),s,o);s.addEventListener("click",()=>D.undo()),o.addEventListener("click",()=>D.redo());const l=g("span",{},"0"),f=g("button",{},"\u21BB");f.addEventListener("click",t);const p=g("div",{},g("strong",{},"Live PropRefs: "),l," ",f),y=g("ol",{});let w=-1;setInterval(()=>{F.generation!==w&&(l.replaceChildren(String(F.sizeBound)),t(),w=F.generation)},oe);const P=g("button",{},"\u{1F50D}");P.addEventListener("click",r);const I=g("span",{},"(none)"),J=g("ol",{}),Se=g("div",{padding:"1em",overflow:"auto"},b,a,P," ",g("strong",{},"Inspected node:")," ",I,J,p,y);n.append(d,Se),document.body.append(n);let te=0,re=0;d.addEventListener("mousedown",m=>{const x=n.getBoundingClientRect();te=m.x-x.x,re=m.y-x.y,window.addEventListener("mousemove",O),document.body.addEventListener("mouseup",v=>{window.removeEventListener("mousemove",O)},{once:!0}),m.preventDefault();function O(v){n.style.left=v.x-te+"px",n.style.top=v.y-re+"px"}})}var Re,Ce,De,Le=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"];function Me(e){return typeof e=="string"?ae(e):typeof e=="number"&&(e&2147483647)===e}function ae(e){return typeof e!="string"||!/^\d{1,10}$/.test(e)?!1:parseInt(e,10)<2147483647}function Ne(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function ce(e,t){Object.defineProperty(e,N,{enumerable:!1,writable:!0,configurable:!1}),e[N]=t}var le=new Set([RegExp,Promise]);"window"in globalThis&&le.add(globalThis.window.constructor);function Q(e){return!(e==null||typeof e!="object"||$(e)||!Object.isExtensible(e)||le.has(e.constructor))}function B(e){return e[j]}function fe(e,t){Object.assign(e,{[j]:t})}function X(e,t){function r(s,o,a){if(o===K)return t;if(o===Ae)return s;if(o===j)return s[o];t[se](S(s,o));let l=Reflect.get(s,o,a);if(l&&typeof l=="object"&&A){const p=B(s),y=p?p+"."+String(o):String(o);fe(l,y)}if(Q(l)){const p=l[N];if(p){if(p[K]!==t)throw Error("Object cannot be tracked by multiple tracker instances");l=p}else{const y=l,w=X(y,t);l=s[o]=new Proxy(y,w),ce(y,l)}}if(typeof l=="function"&&t.options.autoTransactionalize&&o!=="constructor"){let p=function(){const w=t.startTransaction(y.name??"auto");try{return y.apply(a,arguments)}finally{w.operations.length>0?t.commit(w):t.rollback(w)}};var f=p;const y=l;return p}return l}function n(s,o,a){if(typeof o=="string"&&Le.includes(o)){let f=function(){const y=t.startTransaction(String(o)),w=p.apply(a,arguments);return t.commit(y),w};var l=f;const p=s[o];return f}else return r(s,o,a)}let i=0;function c(s,o,a,l){if(o===j)return Reflect.set(s,j,a);if(a&&typeof a=="object"&&A){const w=(B(s)??"~")+"."+String(o);fe(a,w)}if(Q(a)){const w=X(a,t);a=new Proxy(a,w)}const f=o in s?{type:"change",target:s,name:o,oldValue:e[o],newValue:a,timestamp:new Date}:{type:"create",target:s,name:o,newValue:a,timestamp:new Date},p=i,y=Reflect.set(s,o,a,l);return y&&p==i++&&t[M](f),y}function u(s,o,a,l){if(!Array.isArray(s))throw Error("This object used to be an array.  Expected an array.");if(o==="length"){Me(a)||(s.length=a);const f=s.length,p=parseInt(a,10);if(p<f){const y=Object.freeze(s.slice(p,f)),w={type:"arrayshorten",target:s,name:o,oldLength:f,newLength:p,removed:y,timestamp:new Date},P=Reflect.set(s,o,a,l);return t[M](w),++i,P}}if(ae(o)){const f=parseInt(o,10);if(f>=s.length){const p={type:"arrayextend",target:s,name:o,oldLength:s.length,newIndex:f,newValue:a,timestamp:new Date},y=Reflect.set(s,o,a,l);return t[M](p),++i,y}}return c(s,o,a,l)}function d(s,o){const a={type:"delete",target:s,name:o,oldValue:e[o],timestamp:new Date},l=Reflect.deleteProperty(s,o);return l&&t[M](a),l}let h=c,b=r;if(Array.isArray(e)&&(h=u,t.options.trackHistory&&(b=n)),Ne(e))throw Error("Tracking of exotic arguments objects not supported");return{get:b,set:h,deleteProperty:d}}function $(e){return typeof e=="object"&&!!e[K]}var je=class{get sizeBound(){return this.#e}#e=0;get generation(){return this.#t}#t=0;items=new Map;registry=new FinalizationRegistry(e=>{--this.#e,this.items.delete(e),++this.#t});add(e){this.registry.register(e,this.#e),this.items.set(this.#e++,new WeakRef(e)),++this.#t}*[Symbol.iterator](){for(const e of this.items.values()){const t=e.deref();t&&(yield t)}}},F=A?new je:null,pe=class{object;prop;#e=new Set;#t=!1;get subscribers(){return this.#e}constructor(e,t){!$(e)&&e[N]&&(e=e[N]),this.object=e,this.prop=t,F?.add(this)}subscribe(e){return this.#e.add(e),{dispose:()=>this.#e.delete(e)}}notifySubscribers(){this.#t&&console.warn(`Re-entrant property subscription for '${String(this.prop)}'`);const e=Array.from(this.#e);this.#t=!0;for(const t of e)t.notifySubscribers(this);this.#t=!1}get current(){return this.object[this.prop]}set current(e){this.object[this.prop]=e}},ue=new WeakMap;function S(e,t){let r=ue.get(e);r||ue.set(e,r=new Map);let n=r.get(t);return n||r.set(t,n=new pe(e,t)),n}var Fe=class{#e=new Map;#t;#r=!1;#n=new Set;active=!0;constructor(e){this.#t=e}get trackedProperties(){return Array.from(this.#e.keys())}addDependency(e){if(this.active&&!this.#r){if(this.#e.has(e))return;const t=e.subscribe(this);this.#e.set(e,t)}}subscribe(e){return this.#n.add(e),{dispose:()=>this.#n.delete(e)}}notifySubscribers(e){const t=Array.from(this.#n);for(const r of t)r(e)}endDependencyTrack(){this.#t.endDependencyTrack(this)}trackAllChanges(){if(this.#r)return;this.untrackAll();const e=S(this.#t,"history");this.addDependency(e),this.#r=!0}untrackAll(){for(const e of this.#e.values())e.dispose();this.#e.clear()}};function We({operations:e}){for(let t=0;t<e.length;){const r=e[t];if(r.type==="transaction")e.splice(t,1,...r.operations);else if(r.type==="change"&&Object.is(r.oldValue,r.newValue))e.splice(t,1);else if(t>0){const n=e[t-1];if(n.type==="transaction")throw Error("Internal mutraction error.  Found internal transaction on look-back during packTransaction.");n.target!==r.target||n.name!==r.name?++t:n.type==="create"&&r.type==="change"?e.splice(--t,2,{...n,newValue:r.newValue}):n.type==="create"&&r.type==="delete"?e.splice(--t,2):n.type==="change"&&r.type==="change"?e.splice(--t,2,{...n,newValue:r.newValue}):n.type==="change"&&r.type==="delete"?e.splice(--t,2,{...r,oldValue:n.oldValue}):n.type==="delete"&&r.type==="create"?e.splice(--t,2,{...r,...n,type:"change"}):++t}else++t}}var de={trackHistory:!0,autoTransactionalize:!0,compactOnCommit:!0},he=class{#e;#t;#r=[];#n=!1;#s=[];options=de;#o;constructor(e={}){this.setOptions(e)}setOptions(e={}){if(this.#n)throw Error("Cannot change options for a tracker that has already started tracking");e.trackHistory===!1&&(e.compactOnCommit=!1,e.autoTransactionalize??=!1);const t={...de,...e};if(t.compactOnCommit&&!t.trackHistory)throw Error("Option compactOnCommit requires option trackHistory");t.trackHistory?this.#t=[]:this.#t=void 0,this.options=Object.freeze(t)}track(e){if($(e))throw Error("Object already tracked");if(this.#n=!0,!Q)throw Error("This object type cannot be proxied");const t=new Proxy(e,X(e,this));return ce(e,t),t}trackAsReadonlyDeep(e){return this.track(e)}#a(){if(!this.options.trackHistory)throw Error("History tracking disabled.")}get history(){if(this.#a(),this.#s[0]?.trackAllChanges(),this.#o??=S(this,"history"),!this.#t)throw Error("History tracking enabled, but no root transaction. Probably mutraction internal error.");return this.#t}startTransaction(e){return this.#e={type:"transaction",parent:this.#e,operations:[],dependencies:new Set,timestamp:new Date},e&&(this.#e.transactionName=e),this.#e}commit(e){if(!this.#e)throw Error("Attempted to commit transaction when none were open.");if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.options.compactOnCommit&&We(this.#e),this.#e.parent)this.#e.parent.operations.push(this.#e),this.#e.dependencies.forEach(t=>this.#e.parent.dependencies.add(t)),this.#e=this.#e.parent;else{this.#t?.push(this.#e);const t=new Set;for(const r of this.#e.dependencies)for(const n of r.subscribers)t.add(n);for(const r of t)r.notifySubscribers();this.#e=void 0}this.#e==null&&this.#o?.notifySubscribers()}rollback(e){if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.#e){for(;this.#e.operations.length;)this.undo();this.#e=this.#e.parent}else for(;this.#t?.length;)this.undo()}undo(){this.#a();const e=(this.#e?.operations??this.#t).pop();e&&(this.#l(e),this.#r.unshift(e),this.#e==null&&this.#o?.notifySubscribers())}#l(e){if(e.type==="transaction")for(let t=e.operations.length;t-- >0;)this.#l(e.operations[t]);else{const t=e.target;switch(e.type){case"change":case"delete":t[e.name]=e.oldValue;break;case"create":delete t[e.name];break;case"arrayextend":t.length=e.oldLength;break;case"arrayshorten":t.push(...e.removed);break;default:}this.#e||(S(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&S(e.target,"length").notifySubscribers())}}redo(){this.#a();const e=this.#r.shift();e&&(this.#f(e),(this.#e?.operations??this.#t).push(e),this.#e==null&&this.#o?.notifySubscribers())}#f(e){if(e.type==="transaction")for(const t of e.operations)this.#f(t);else{const t=e.target;switch(e.type){case"change":case"create":t[e.name]=e.newValue;break;case"delete":delete t[e.name];break;case"arrayextend":t[e.newIndex]=e.newValue;break;case"arrayshorten":t.length=e.newLength;break;default:}this.#e||(S(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&S(e.target,"length").notifySubscribers())}}clearRedos(){this.#r.length=0}clearHistory(){this.#a(),this.#e=void 0,this.#t.length=0,this.clearRedos()}[M](e){this.options.trackHistory&&(A&&(e.targetPath=B(e.target)),(this.#e?.operations??this.#t).push(Object.freeze(e))),this.clearRedos(),this.#e?(this.#e.dependencies.add(S(e.target,e.name)),(e.type==="arrayextend"||e.type==="arrayshorten")&&this.#e.dependencies.add(S(e.target,"length"))):(S(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&S(e.target,"length").notifySubscribers(),this.#o?.notifySubscribers())}ignoreUpdates(e){const t=this.startDependencyTrack();t.active=!1,e(),t.endDependencyTrack()}startDependencyTrack(){const e=new Fe(this);return this.#s.unshift(e),e}endDependencyTrack(e){if(this.#s[0]!==e)throw Error("Specified dependency list is not top of stack");return this.#s.shift(),e}[se](e){this.#c?this.#i=e:this.#s[0]?.addDependency(e)}#c=!1;#i=void 0;getPropRef(e){const t=this.getPropRefTolerant(e);if(!t)throw Error("No tracked properties.  Prop ref detection requires a tracked object.");return t}getPropRefTolerant(e){if(this.#c)throw Error("Cannot be called re-entrantly.");this.#c=!0,this.#i=void 0;try{const t=e();if(!this.#i)return;const r=this.#i.current;return Object.is(t,r)||console.error("The last operation of the callback must be a property get.\n`(foo || bar).quux` is allowed, but `foo.bar + 1` is not"),this.#i}finally{this.#c=!1}}},D=new he;function Ie(e){return D.track(e)}var He={dispose:()=>{}},z=0;function Be(){return z}function E(e,t={}){const{tracker:r=D,suppressUntrackedWarning:n=!1}=t;let i=r.startDependencyTrack(),c;try{c=e(i)}finally{i.endDependencyTrack()}if(i.trackedProperties.length===0)return n||console.warn("effect() callback has no dependencies on any tracked properties.  It will not fire again."),He;++z;let u=i.subscribe(b),d=!1;function h(){d&&console.error("Effect already disposed"),d=!0,i.untrackAll(),u.dispose(),--z}function b(s){typeof c=="function"&&c(),h(),d=!1,i=r.startDependencyTrack(),c=e(i,s),i.endDependencyTrack(),u=i.subscribe(b),++z}return{dispose:h}}var Y=new WeakMap;function R(e,t){const r=Y.get(e);r?r.push(t):Y.set(e,[t])}function W(e){Y.get(e)?.forEach(r=>r.dispose()),e instanceof Element&&e.childNodes.forEach(W)}var U={suppressUntrackedWarning:!0};function $e(e){return e!=null&&typeof e=="object"&&"$muType"in e&&typeof e.$muType=="string"}function ye(e,t){if(Array.isArray(t)){t.forEach(r=>ye(e,r));return}if(!$e(t))throw Error("Expected a node modifier for 'mu:apply', but got "+typeof t);switch(t.$muType){case"attribute":e.setAttribute(t.name,t.value);break;default:throw Error("Unknown node modifier type: "+t.$muType)}}var Z=new WeakMap;function G(e,t){if(t.trackedProperties.length===0)return;let r=Z.get(e);r||Z.set(e,r=[]),r.push(t)}function ge(e){return Z.get(e)}function ze(e,t,r,...n){const i=document.createElement(e);i.append(...n);let c;for(let[s,o]of Object.entries(t))switch(s){case"mu:syncEvent":c=o;break;case"mu:apply":ye(i,o);break;default:i[s]=o;break}const u=c?[]:void 0;for(let[s,o]of Object.entries(r)){if(u&&s in i){const a=D.getPropRefTolerant(o);a&&u.push([s,a])}switch(s){case"style":{let a=function(f){Object.assign(i.style,o()),A&&G(i,f)};var d=a;const l=E(a,U);R(i,l);break}case"classList":{let a=function(f){const p=o();for(const[y,w]of Object.entries(p))i.classList.toggle(y,!!w);A&&G(i,f)};var h=a;const l=E(a,U);R(i,l);break}default:{let a=function(f){i[s]=o(),A&&G(i,f)};var b=a;const l=E(a,U);R(i,l);break}}}if(c&&u?.length)for(const s of c.matchAll(/\S+/g))i.addEventListener(s[0],()=>{for(const[o,a]of u)a.current=i[o]});return i}function Ue(e){let t=document.createTextNode(""),r;return r=E(function(i){const c=e();if(c instanceof Node)i.untrackAll(),t=c;else{const u=document.createTextNode(String(c??""));r&&R(u,r),t.replaceWith(u),t=u,A&&G(t,i)}},U),R(t,r),t}var T=class{static id=0;startMarker=document.createTextNode("");endMarker=document.createTextNode("");constructor(...e){document.createDocumentFragment().append(this.startMarker,...e,this.endMarker)}removeAsFragment(){if(this.startMarker.parentNode instanceof DocumentFragment)return this.startMarker.parentNode;const e=[];for(let r=this.startMarker;;r=r?.nextSibling){if(r==null)throw Error("End marker not found as subsequent document sibling as start marker");if(e.push(r),Object.is(r,this.endMarker))break}const t=document.createDocumentFragment();return t.append(...e),t}emptyAsFragment(){const e=[];for(let r=this.startMarker.nextSibling;;r=r?.nextSibling){if(r==null)throw Error("End marker not found as subsequent document sibling as start marker");if(Object.is(r,this.endMarker))break;e.push(r)}const t=document.createDocumentFragment();return t.append(...e),t}replaceWith(...e){this.emptyAsFragment(),this.append(...e)}append(...e){const t=document.createDocumentFragment();if(t.append(...e),!this.endMarker.parentNode)throw Error("End marker of ElementSpan has no parent");this.endMarker.parentNode.insertBefore(t,this.endMarker)}registerCleanup(e){R(this.startMarker,e)}cleanup(){W(this.startMarker);for(const e of this.emptyAsFragment().childNodes)W(e)}};function be(e){return e!=null&&typeof e=="object"&&"node"in e&&e.node instanceof Node}function V(e){const t=new T,r=E(function(i){for(const u of t.emptyAsFragment().childNodes)W(u);const c=e();if(be(c))return t.replaceWith(c.node),c.cleanup;if(c!=null){t.replaceWith(c);return}});return t.registerCleanup(r),t.removeAsFragment()}var q={suppressUntrackedWarning:!0};function me(e,t){if(typeof e=="function")return V(()=>me(e(),t));const r=new T,n=[],i=e??[],c=E(function(h){for(let b=n.length;b<i.length;b++){const s={container:new T};n.push(s),s.subscription=E(function(a){s.cleanup?.(),s.container.cleanup();const l=i[b],f=l!==void 0?t(l,b,i):document.createTextNode("");be(f)?(s.container.replaceWith(f.node),s.cleanup=f.cleanup):f!=null&&(s.container.replaceWith(f),s.cleanup=void 0)},q),r.append(s.container.removeAsFragment())}for(;n.length>i.length;)u(n.pop())},q);return r.registerCleanup({dispose(){n.forEach(u)}}),r.registerCleanup(c),r.removeAsFragment();function u({cleanup:d,container:h,subscription:b}){d?.(),b?.dispose(),h.removeAsFragment(),h.cleanup()}}function we(e,t){if(typeof e=="function")return V(()=>we(e(),t));const r=new T,n=[],i=new WeakMap,c=e??[],u=E(function(b){for(let s=n.length;s<c.length;s++){const o=new T;n.push(o),E(function(l){o.emptyAsFragment();const f=c[s];if(f==null)return;if(typeof f!="object")throw Error("Elements must be object in ForEachPersist");let p=i.get(f);if(p==null){l&&(l.active=!1);try{const y=t(f);p=y instanceof HTMLElement?y:new T(y),i.set(f,p)}finally{l&&(l.active=!0)}}p instanceof HTMLElement?o.replaceWith(p):p!=null&&o.replaceWith(p.removeAsFragment())},q),r.append(o.removeAsFragment())}for(;n.length>c.length;)d(n.pop())},q);return r.registerCleanup({dispose(){n.forEach(d)}}),r.registerCleanup(u),r.removeAsFragment();function d(h){h.removeAsFragment(),h.cleanup()}}var Ge={suppressUntrackedWarning:!0};function qe(){return document.createTextNode("")}function Je(...e){let t,r,n=!1;function i(){n||c.dispose()}const c=E(function(){let d;for(const{nodeGetter:h,conditionGetter:b}of e)if(!b||b()){d=h;break}if(d??=qe,d!==r){t&&(n=!0,W(t),n=!1),r=d;const h=r();t?.replaceWith(h),R(h,{dispose:i}),t=h}},Ge);if(!t)throw Error("Logical error in choose() for mu:if.  No element assigned after first effect invocation.");return t}function Ke(e){return document.createTextNode(String(e))}function _e(e,t=document.createTextNode(""),r=Ke){const n=new T(t);return e.then(i=>n.replaceWith(i)),e.catch(i=>n.replaceWith(typeof r=="function"?r(i):r)),n.removeAsFragment()}var ke=new WeakMap;function Qe(...e){if(e.some(c=>"pattern"in c&&c.pattern instanceof RegExp&&c.pattern.global))throw Error("Global-flagged route patterns not supported");const t=new T;let r,n=!1;function i(c){const{hash:u}=new URL(c);for(const d of e){let h,b=!1;if("pattern"in d?typeof d.pattern=="string"?b=u===d.pattern:b=!!(h=d.pattern.exec(u)??void 0):b=!0,b){n?r?.cleanup():r?.removeAsFragment(),r=void 0;const{element:s}=d;n=typeof s=="function";const o=typeof s=="function"?s(h):s;if(o instanceof DocumentFragment){let a=ke.get(o);a||ke.set(o,a=new T(o)),r=a,t.replaceWith(a.removeAsFragment())}else r=void 0,t.replaceWith(o);d.suppressScroll||window.scrollTo(0,0);return}}t.emptyAsFragment()}return window.addEventListener("hashchange",c=>i(c.newURL)),i(location.href),t.removeAsFragment()}var ve="data-mu-style",Xe=String(Math.random()*1e6|0),Ye=0;function Ze(e){const t=new CSSStyleSheet,r=Xe+"-"+ ++Ye;for(const[n,i]of Object.entries(e)){const c=`[${ve}="${r}"]`,u=`${c}:is(${n}), ${c} :is(${n}) {}`;t.insertRule(u,0);const d=t.cssRules.item(0);Object.assign(d.style,i)}return document.adoptedStyleSheets.push(t),{$muType:"attribute",name:ve,value:r}}function Ve(e,t=10){return ee(e,t)}function ee(e,t){if(t<0)throw Error("Maximum depth exceeded.  Maybe there's a reference cycle?");if(typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>ee(n,t-1));if(e.constructor&&e.constructor!==Object)throw Error("Can't clone objects with a prototype chain or instances of classes");return Object.fromEntries(Object.entries(e).map(([r,n])=>[r,ee(n,t-1)]))}var et="0.22.4";export{me as ForEach,we as ForEachPersist,_e as PromiseLoader,pe as PropReference,Qe as Router,V as Swapper,he as Tracker,Ue as child,Je as choose,S as createOrRetrievePropRef,D as defaultTracker,E as effect,ze as element,$ as isTracked,Ze as makeLocalStyle,Ie as track,Ve as untrackedClone,et as version};
