"use strict";var L=Symbol("RecordMutation"),K=Symbol("TrackerOf"),N=Symbol("ProxyOf"),fe=Symbol("RecordDependency"),Ce=Symbol("GetOriginal"),j=Symbol("AccessPath"),Me=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"];function Le(e){return typeof e=="string"?ue(e):typeof e=="number"&&(e&2147483647)===e}function ue(e){return typeof e!="string"||!/^\d{1,10}$/.test(e)?!1:parseInt(e,10)<2147483647}function Ne(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function pe(e,t){Object.defineProperty(e,N,{enumerable:!1,writable:!0,configurable:!1}),e[N]=t}var de=new Set([RegExp,Promise]);"window"in globalThis&&de.add(globalThis.window.constructor);function _(e){return!(e==null||typeof e!="object"||B(e)||!Object.isExtensible(e)||de.has(e.constructor))}function $(e){return e[j]}function he(e,t){Object.assign(e,{[j]:t})}function Q(e,t){function n(s,o,a){if(o===K)return t;if(o===Ce)return s;if(o===j)return s[o];t[fe](x(s,o));let f=Reflect.get(s,o,a);if(f&&typeof f=="object"&&E){const d=$(s),g=d?d+"."+String(o):String(o);he(f,g)}if(_(f)){const d=f[N];if(d){if(d[K]!==t)throw Error("Object cannot be tracked by multiple tracker instances");f=d}else{const g=f,w=Q(g,t);f=s[o]=new Proxy(g,w),pe(g,f)}}if(typeof f=="function"&&t.options.autoTransactionalize&&o!=="constructor"){let d=function(){const w=t.startTransaction(g.name??"auto");try{return g.apply(a,arguments)}finally{w.operations.length>0?t.commit(w):t.rollback(w)}};var p=d;const g=f;return d}return f}function r(s,o,a){if(typeof o=="string"&&Me.includes(o)){let p=function(){const g=t.startTransaction(String(o)),w=d.apply(a,arguments);return t.commit(g),w};var f=p;const d=s[o];return p}else return n(s,o,a)}let i=0;function c(s,o,a,f){if(o===j)return Reflect.set(s,j,a);if(a&&typeof a=="object"&&E){const w=($(s)??"~")+"."+String(o);he(a,w)}if(_(a)){const w=Q(a,t);a=new Proxy(a,w)}const p=o in s?{type:"change",target:s,name:o,oldValue:e[o],newValue:a,timestamp:new Date}:{type:"create",target:s,name:o,newValue:a,timestamp:new Date},d=i,g=Reflect.set(s,o,a,f);return g&&d==i++&&t[L](p),g}function h(s,o,a,f){if(!Array.isArray(s))throw Error("This object used to be an array.  Expected an array.");if(o==="length"){Le(a)||(s.length=a);const p=s.length,d=parseInt(a,10);if(d<p){const g=Object.freeze(s.slice(d,p)),w={type:"arrayshorten",target:s,name:o,oldLength:p,newLength:d,removed:g,timestamp:new Date},q=Reflect.set(s,o,a,f);return t[L](w),++i,q}}if(ue(o)){const p=parseInt(o,10);if(p>=s.length){const d={type:"arrayextend",target:s,name:o,oldLength:s.length,newIndex:p,newValue:a,timestamp:new Date},g=Reflect.set(s,o,a,f);return t[L](d),++i,g}}return c(s,o,a,f)}function y(s,o){const a={type:"delete",target:s,name:o,oldValue:e[o],timestamp:new Date},f=Reflect.deleteProperty(s,o);return f&&t[L](a),f}let u=c,b=n;if(Array.isArray(e)&&(u=h,t.options.trackHistory&&(b=r)),Ne(e))throw Error("Tracking of exotic arguments objects not supported");return{get:b,set:u,deleteProperty:y}}function B(e){return typeof e=="object"&&!!e[K]}var je=class{get sizeBound(){return this.#e}#e=0;get generation(){return this.#t}#t=0;items=new Map;registry=new FinalizationRegistry(e=>{--this.#e,this.items.delete(e),++this.#t});add(e){this.registry.register(e,this.#e),this.items.set(this.#e++,new WeakRef(e)),++this.#t}*[Symbol.iterator](){for(const e of this.items.values()){const t=e.deref();t&&(yield t)}}},X=new je;function Fe(){if(!X)throw Error("Only allowed in debug mode");return X}var ye=class{object;prop;#e=new Set;#t=!1;get subscribers(){return this.#e}constructor(e,t){!B(e)&&e[N]&&(e=e[N]),this.object=e,this.prop=t,X?.add(this)}subscribe(e){return this.#e.add(e),{dispose:()=>this.#e.delete(e)}}notifySubscribers(){this.#t&&console.warn(`Re-entrant property subscription for '${String(this.prop)}'`);const e=Array.from(this.#e);this.#t=!0;for(const t of e)t.notifySubscribers(this);this.#t=!1}get current(){return this.object[this.prop]}set current(e){this.object[this.prop]=e}},ge=new WeakMap;function x(e,t){let n=ge.get(e);n||ge.set(e,n=new Map);let r=n.get(t);return r||n.set(t,r=new ye(e,t)),r}var We=class{#e=new Map;#t;#n=!1;#r=new Set;active=!0;constructor(e){this.#t=e}get trackedProperties(){return Array.from(this.#e.keys())}addDependency(e){if(this.active&&!this.#n){if(this.#e.has(e))return;const t=e.subscribe(this);this.#e.set(e,t)}}subscribe(e){return this.#r.add(e),{dispose:()=>this.#r.delete(e)}}notifySubscribers(e){const t=Array.from(this.#r);for(const n of t)n(e)}endDependencyTrack(){this.#t.endDependencyTrack(this)}trackAllChanges(){if(this.#n)return;this.untrackAll();const e=x(this.#t,"history");this.addDependency(e),this.#n=!0}untrackAll(){for(const e of this.#e.values())e.dispose();this.#e.clear()}};function Ie({operations:e}){for(let t=0;t<e.length;){const n=e[t];if(n.type==="transaction")e.splice(t,1,...n.operations);else if(n.type==="change"&&Object.is(n.oldValue,n.newValue))e.splice(t,1);else if(t>0){const r=e[t-1];if(r.type==="transaction")throw Error("Internal mutraction error.  Found internal transaction on look-back during packTransaction.");r.target!==n.target||r.name!==n.name?++t:r.type==="create"&&n.type==="change"?e.splice(--t,2,{...r,newValue:n.newValue}):r.type==="create"&&n.type==="delete"?e.splice(--t,2):r.type==="change"&&n.type==="change"?e.splice(--t,2,{...r,newValue:n.newValue}):r.type==="change"&&n.type==="delete"?e.splice(--t,2,{...n,oldValue:r.oldValue}):r.type==="delete"&&n.type==="create"?e.splice(--t,2,{...n,...r,type:"change"}):++t}else++t}}var be={trackHistory:!0,autoTransactionalize:!0,compactOnCommit:!0},me=class{#e;#t;#n=[];#r=!1;#s=[];options=be;#o;constructor(e={}){this.setOptions(e)}setOptions(e={}){if(this.#r)throw Error("Cannot change options for a tracker that has already started tracking");e.trackHistory===!1&&(e.compactOnCommit=!1,e.autoTransactionalize??=!1);const t={...be,...e};if(t.compactOnCommit&&!t.trackHistory)throw Error("Option compactOnCommit requires option trackHistory");t.trackHistory?this.#t=[]:this.#t=void 0,this.options=Object.freeze(t)}track(e){if(B(e))throw Error("Object already tracked");if(this.#r=!0,!_)throw Error("This object type cannot be proxied");const t=new Proxy(e,Q(e,this));return pe(e,t),t}trackAsReadonlyDeep(e){return this.track(e)}#a(){if(!this.options.trackHistory)throw Error("History tracking disabled.")}get history(){if(this.#a(),this.#s[0]?.trackAllChanges(),this.#o??=x(this,"history"),!this.#t)throw Error("History tracking enabled, but no root transaction. Probably mutraction internal error.");return this.#t}startTransaction(e){return this.#e={type:"transaction",parent:this.#e,operations:[],dependencies:new Set,timestamp:new Date},e&&(this.#e.transactionName=e),this.#e}commit(e){if(!this.#e)throw Error("Attempted to commit transaction when none were open.");if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.options.compactOnCommit&&Ie(this.#e),this.#e.parent)this.#e.parent.operations.push(this.#e),this.#e.dependencies.forEach(t=>this.#e.parent.dependencies.add(t)),this.#e=this.#e.parent;else{this.#t?.push(this.#e);const t=new Set;for(const n of this.#e.dependencies)for(const r of n.subscribers)t.add(r);for(const n of t)n.notifySubscribers();this.#e=void 0}this.#e==null&&this.#o?.notifySubscribers()}rollback(e){if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.#e){for(;this.#e.operations.length;)this.undo();this.#e=this.#e.parent}else for(;this.#t?.length;)this.undo()}undo(){this.#a();const e=(this.#e?.operations??this.#t).pop();e&&(this.#l(e),this.#n.unshift(e),this.#e==null&&this.#o?.notifySubscribers())}#l(e){if(e.type==="transaction")for(let t=e.operations.length;t-- >0;)this.#l(e.operations[t]);else{const t=e.target;switch(e.type){case"change":case"delete":t[e.name]=e.oldValue;break;case"create":delete t[e.name];break;case"arrayextend":t.length=e.oldLength;break;case"arrayshorten":t.push(...e.removed);break;default:}this.#e||(x(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&x(e.target,"length").notifySubscribers())}}redo(){this.#a();const e=this.#n.shift();e&&(this.#f(e),(this.#e?.operations??this.#t).push(e),this.#e==null&&this.#o?.notifySubscribers())}#f(e){if(e.type==="transaction")for(const t of e.operations)this.#f(t);else{const t=e.target;switch(e.type){case"change":case"create":t[e.name]=e.newValue;break;case"delete":delete t[e.name];break;case"arrayextend":t[e.newIndex]=e.newValue;break;case"arrayshorten":t.length=e.newLength;break;default:}this.#e||(x(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&x(e.target,"length").notifySubscribers())}}clearRedos(){this.#n.length=0}clearHistory(){this.#a(),this.#e=void 0,this.#t.length=0,this.clearRedos()}[L](e){this.options.trackHistory&&(E&&(e.targetPath=$(e.target)),(this.#e?.operations??this.#t).push(Object.freeze(e))),this.clearRedos(),this.#e?(this.#e.dependencies.add(x(e.target,e.name)),(e.type==="arrayextend"||e.type==="arrayshorten")&&this.#e.dependencies.add(x(e.target,"length"))):(x(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&x(e.target,"length").notifySubscribers(),this.#o?.notifySubscribers())}ignoreUpdates(e){const t=this.startDependencyTrack();t.active=!1,e(),t.endDependencyTrack()}startDependencyTrack(){const e=new We(this);return this.#s.unshift(e),e}endDependencyTrack(e){if(this.#s[0]!==e)throw Error("Specified dependency list is not top of stack");return this.#s.shift(),e}[fe](e){this.#c?this.#i=e:this.#s[0]?.addDependency(e)}#c=!1;#i=void 0;getPropRef(e){const t=this.getPropRefTolerant(e);if(!t)throw Error("No tracked properties.  Prop ref detection requires a tracked object.");return t}getPropRefTolerant(e){if(this.#c)throw Error("Cannot be called re-entrantly.");this.#c=!0,this.#i=void 0;try{const t=e();if(!this.#i)return;const n=this.#i.current;return Object.is(t,n)||console.error("The last operation of the callback must be a property get.\n`(foo || bar).quux` is allowed, but `foo.bar + 1` is not"),this.#i}finally{this.#c=!1}}},P=new me;function He(e){return P.track(e)}var Y="mu:debugMode",we=250,E="sessionStorage"in globalThis&&!!sessionStorage.getItem(Y);if("sessionStorage"in globalThis){let e=function(){sessionStorage.setItem(Y,"true"),location.reload()},t=function(){sessionStorage.removeItem(Y),location.reload()};if(Je=e,Ke=t,Object.assign(window,{[Symbol.for("mutraction.debug")]:e}),["localhost","127.0.0.1","[::1]"].includes(location.hostname)&&!E&&(console.info("[\xB5] Try the mutraction diagnostic tool.  This message is only shown from localhost, but the tool is always available."),console.info("\xBB window[Symbol.for('mutraction.debug')]()")),E){let n=function(l){return Array.isArray(l)?`Array(${l.length})`:typeof l=="object"?"{ ... }":typeof l=="function"?l.name?`${l.name}() { ... }`:"() => { ... }":JSON.stringify(l)},r=function(l,v,...k){const m=document.createElement(l);return m.style.all="revert",Object.assign(m.style,v),m.append(...k),m},i=function(l){const v=Array.from(l.childNodes).filter(k=>k instanceof Text).flatMap(k=>ke(k)).filter(Boolean).map(k=>k);return(ke(l)??[]).concat(...v)},c=function(l){const v=$(l.object),k=v?v+"."+String(l.prop):String(l.prop),m=l.current,S=n(m),H=!m||typeof m!="object"&&typeof m!="function",M=r("span",H?{cursor:"pointer",textDecoration:"underline"}:{},S),C=l.subscribers.size,Oe=`(${C} ${C===1?"subscriber":"subscribers"})`,De=r("li",{},r("code",{},k),": ",M," ",Oe);return H&&M.addEventListener("click",()=>{const le=prompt(`Update ${String(l.prop)}`,S);try{le&&(l.current=JSON.parse(le)),h()}catch{}}),De},h=function(){const l=[];for(const v of W)l.push(c(v));oe.replaceChildren(...l)},y=function(){D.disabled=!0,D.textContent="\u2026",I.textContent="(choose)";let l,v="";function k(m){if(m.target instanceof HTMLElement){let S=m.target;for(;S&&(i(S)?.length??0)===0;)S=S.parentElement;S!=l&&(l&&(l.style.boxShadow=v),v=S?.style.boxShadow??"",S&&(S.style.boxShadow?S.style.boxShadow+=", inset #f0f4 0 99vmax":S.style.boxShadow+="inset #f0f4 0 99vmax"),l=S)}m.stopPropagation()}document.addEventListener("mousemove",k,{capture:!0}),document.addEventListener("click",m=>{if(m.stopPropagation(),m.preventDefault(),D.disabled=!1,D.textContent="\u{1F50D}",document.removeEventListener("mousemove",k,{capture:!0}),l){l.style.boxShadow=v,I.textContent=l.tagName.toLowerCase();const S=i(l),H=new Set(S.flatMap(C=>C.trackedProperties)),M=[];for(const C of H)M.push(c(C));J.replaceChildren(...M)}else I.textContent="(none)",J.replaceChildren()},{capture:!0,once:!0})};$e=n,Be=r,ze=i,Ue=c,Ge=h,qe=y;const u=r("div",{position:"fixed",top:"50px",left:"50px",width:"30em",height:"20em",resize:"both",minHeight:"1.6em",minWidth:"15em",zIndex:"2147483647",background:"#eee",color:"#123",boxShadow:"#000 0em 0.5em 1em",border:"solid #345 0.4em",fontSize:"16px",display:"flex",flexDirection:"column",overflow:"auto"}),b=r("button",{marginRight:"1em"},"_");let s=!1;b.addEventListener("click",l=>{(s=!s)?(u.style.maxHeight="1.6em",u.style.maxWidth="15em"):(u.style.maxHeight="",u.style.maxWidth="")});const o=r("button",{float:"right"},"\xD7");o.addEventListener("click",t);const a=r("div",{fontWeight:"bold",background:"#123",color:"#eee",padding:"0.1em 1em",cursor:"grab"},o,b,"\u03BC diagnostics"),f=r("div",{whiteSpace:"pre"},"0"),p=r("p",{},r("p",{},r("strong",{},"Active effects: "),f));let d=-1;setInterval(()=>{let{activeEffects:l,generation:v}=Ye();v!==d&&(d=v,f.innerText=[...l.entries()].map(k=>`${k[0]}\xD7${k[1]}`).join(`
`))},we);const g=r("button",{},"Undo"),w=r("button",{},"Redo");queueMicrotask(()=>{const{trackHistory:l}=P.options;l||(g.disabled=w.disabled=!0)});const q=r("p",{},r("strong",{},"History: "),g,w);g.addEventListener("click",()=>P.undo()),w.addEventListener("click",()=>P.redo());const re=r("span",{},"0"),W=Fe(),se=r("button",{},"\u21BB");se.addEventListener("click",h);const Pe=r("div",{},r("strong",{},"Live PropRefs: "),re," ",se),oe=r("ol",{});let ie=-1;setInterval(()=>{W.generation!==ie&&(re.replaceChildren(String(W.sizeBound)),h(),ie=W.generation)},we);const D=r("button",{},"\u{1F50D}");D.addEventListener("click",y);const I=r("span",{},"(none)"),J=r("ol",{}),Re=r("div",{padding:"1em",overflow:"auto"},p,q,D," ",r("strong",{},"Inspected node:")," ",I,J,Pe,oe);u.append(a,Re),document.body.append(u);let ae=0,ce=0;a.addEventListener("mousedown",l=>{const v=u.getBoundingClientRect();ae=l.x-v.x,ce=l.y-v.y,window.addEventListener("mousemove",k),document.body.addEventListener("mouseup",m=>{window.removeEventListener("mousemove",k)},{once:!0}),l.preventDefault();function k(m){u.style.left=m.x-ae+"px",u.style.top=m.y-ce+"px"}})}}var $e,Be,ze,Ue,Ge,qe,Je,Ke,_e={dispose:()=>{}},Z=0,R=new Map;function Qe(e){const t=e.name||"(anonymous)",n=R.get(t);n?R.set(t,n+1):R.set(t,1),++Z}function Xe(e){const t=e.name||"(anonymous)",n=R.get(t);!n||n<=1?R.delete(t):R.set(t,n-1),++Z}function Ye(){return{activeEffects:R,generation:Z}}function A(e,t={}){const{tracker:n=P,suppressUntrackedWarning:r=!1}=t;let i=n.startDependencyTrack(),c;try{c=e(i)}finally{i.endDependencyTrack()}if(i.trackedProperties.length===0)return r||console.warn("effect() callback has no dependencies on any tracked properties.  It will not fire again."),_e;E&&Qe(e);let h=i.subscribe(s),y=!1,u=!1;function b(){y&&console.error("Effect already disposed"),y=!0,i.untrackAll(),h.dispose(),!u&&E&&Xe(e)}function s(o){typeof c=="function"&&c(),u=!0,b(),u=y=!1,i=n.startDependencyTrack(),c=e(i,o),i.endDependencyTrack(),h=i.subscribe(s)}return{dispose:b}}var V=new WeakMap;function O(e,t){const n=V.get(e);n?n.push(t):V.set(e,[t])}function F(e){V.get(e)?.forEach(n=>n.dispose()),e instanceof Element&&e.childNodes.forEach(F)}var z={suppressUntrackedWarning:!0};function Ze(e){return e!=null&&typeof e=="object"&&"$muType"in e&&typeof e.$muType=="string"}function ve(e,t){if(Array.isArray(t)){t.forEach(n=>ve(e,n));return}if(!Ze(t))throw Error("Expected a node modifier for 'mu:apply', but got "+typeof t);switch(t.$muType){case"attribute":e.setAttribute(t.name,t.value);break;default:throw Error("Unknown node modifier type: "+t.$muType)}}var ee=new WeakMap;function U(e,t){if(t.trackedProperties.length===0)return;let n=ee.get(e);n||ee.set(e,n=[]),n.push(t)}function ke(e){return ee.get(e)}function Ve(e,t,n,...r){const i=document.createElement(e);i.append(...r);let c;for(let[s,o]of Object.entries(t))switch(s){case"mu:syncEvent":c=o;break;case"mu:apply":ve(i,o);break;default:i[s]=o;break}const h=c?[]:void 0;for(let[s,o]of Object.entries(n)){if(h&&s in i){const a=P.getPropRefTolerant(o);a&&h.push([s,a])}switch(s){case"style":{let a=function(p){Object.assign(i.style,o()),E&&U(i,p)};var y=a;const f=A(a,z);O(i,f);break}case"classList":{let a=function(p){const d=o();for(const[g,w]of Object.entries(d))i.classList.toggle(g,!!w);E&&U(i,p)};var u=a;const f=A(a,z);O(i,f);break}default:{let a=function(p){i[s]=o(),E&&U(i,p)};var b=a;const f=A(a,z);O(i,f);break}}}if(c&&h?.length)for(const s of c.matchAll(/\S+/g))i.addEventListener(s[0],()=>{for(const[o,a]of h)a.current=i[o]});return i}function et(e){let t=document.createTextNode(""),n;return n=A(function(i){const c=e();if(c instanceof Node)i.untrackAll(),t=c;else{const h=document.createTextNode(String(c??""));n&&O(h,n),t.replaceWith(h),t=h,E&&U(t,i)}},z),O(t,n),t}var T=class{static id=0;startMarker=document.createTextNode("");endMarker=document.createTextNode("");constructor(...e){document.createDocumentFragment().append(this.startMarker,...e,this.endMarker)}removeAsFragment(){if(this.startMarker.parentNode instanceof DocumentFragment)return this.startMarker.parentNode;const e=[];for(let n=this.startMarker;;n=n?.nextSibling){if(n==null)throw Error("End marker not found as subsequent document sibling as start marker");if(e.push(n),Object.is(n,this.endMarker))break}const t=document.createDocumentFragment();return t.append(...e),t}emptyAsFragment(){const e=[];for(let n=this.startMarker.nextSibling;;n=n?.nextSibling){if(n==null)throw Error("End marker not found as subsequent document sibling as start marker");if(Object.is(n,this.endMarker))break;e.push(n)}const t=document.createDocumentFragment();return t.append(...e),t}replaceWith(...e){this.emptyAsFragment(),this.append(...e)}append(...e){const t=document.createDocumentFragment();if(t.append(...e),!this.endMarker.parentNode)throw Error("End marker of ElementSpan has no parent");this.endMarker.parentNode.insertBefore(t,this.endMarker)}registerCleanup(e){O(this.startMarker,e)}cleanup(){F(this.startMarker);for(const e of this.emptyAsFragment().childNodes)F(e)}};function Se(e){return e!=null&&typeof e=="object"&&"node"in e&&e.node instanceof Node}function te(e){const t=new T,n=A(function(i){for(const h of t.emptyAsFragment().childNodes)F(h);const c=e();if(Se(c))return t.replaceWith(c.node),c.cleanup;if(c!=null){t.replaceWith(c);return}});return t.registerCleanup(n),t.removeAsFragment()}var G={suppressUntrackedWarning:!0};function xe(e,t){if(typeof e=="function")return te(()=>xe(e(),t));const n=new T,r=[],i=e??[],c=A(function(u){for(let b=r.length;b<i.length;b++){const s={container:new T};r.push(s),s.subscription=A(function(a){s.cleanup?.(),s.container.cleanup();const f=i[b],p=f!==void 0?t(f,b,i):document.createTextNode("");Se(p)?(s.container.replaceWith(p.node),s.cleanup=p.cleanup):p!=null&&(s.container.replaceWith(p),s.cleanup=void 0)},G),n.append(s.container.removeAsFragment())}for(;r.length>i.length;)h(r.pop())},G);return n.registerCleanup({dispose(){r.forEach(h)}}),n.registerCleanup(c),n.removeAsFragment();function h({cleanup:y,container:u,subscription:b}){y?.(),b?.dispose(),u.removeAsFragment(),u.cleanup()}}function Ee(e,t){if(typeof e=="function")return te(()=>Ee(e(),t));const n=new T,r=[],i=new WeakMap,c=e??[],h=A(function(b){for(let s=r.length;s<c.length;s++){const o=new T;r.push(o),A(function(f){o.emptyAsFragment();const p=c[s];if(p==null)return;if(typeof p!="object")throw Error("Elements must be object in ForEachPersist");let d=i.get(p);if(d==null){f&&(f.active=!1);try{const g=t(p);d=g instanceof HTMLElement?g:new T(g),i.set(p,d)}finally{f&&(f.active=!0)}}d instanceof HTMLElement?o.replaceWith(d):d!=null&&o.replaceWith(d.removeAsFragment())},G),n.append(o.removeAsFragment())}for(;r.length>c.length;)y(r.pop())},G);return n.registerCleanup({dispose(){r.forEach(y)}}),n.registerCleanup(h),n.removeAsFragment();function y(u){u.removeAsFragment(),u.cleanup()}}var tt={suppressUntrackedWarning:!0};function nt(){return document.createTextNode("")}function rt(...e){let t,n,r=!1;function i(){r||c.dispose()}const c=A(function(){let y;for(const{nodeGetter:u,conditionGetter:b}of e)if(!b||b()){y=u;break}if(y??=nt,y!==n){t&&(r=!0,F(t),r=!1),n=y;const u=n();t?.replaceWith(u),O(u,{dispose:i}),t=u}},tt);if(!t)throw Error("Logical error in choose() for mu:if.  No element assigned after first effect invocation.");return t}function st(e){return document.createTextNode(String(e))}function ot(e,t=document.createTextNode(""),n=st){const r=new T(t);return e.then(i=>r.replaceWith(i)),e.catch(i=>r.replaceWith(typeof n=="function"?n(i):n)),r.removeAsFragment()}var Ae=new WeakMap;function it(...e){if(e.some(c=>"pattern"in c&&c.pattern instanceof RegExp&&c.pattern.global))throw Error("Global-flagged route patterns not supported");const t=new T;let n,r=!1;function i(c){const{hash:h}=new URL(c);for(const y of e){let u,b=!1;if("pattern"in y?typeof y.pattern=="string"?b=h===y.pattern:b=!!(u=y.pattern.exec(h)??void 0):b=!0,b){r?n?.cleanup():n?.removeAsFragment(),n=void 0;const{element:s}=y;r=typeof s=="function";const o=typeof s=="function"?s(u):s;if(o instanceof DocumentFragment){let a=Ae.get(o);a||Ae.set(o,a=new T(o)),n=a,t.replaceWith(a.removeAsFragment())}else n=void 0,t.replaceWith(o);y.suppressScroll||window.scrollTo(0,0);return}}t.emptyAsFragment()}return window.addEventListener("hashchange",c=>i(c.newURL)),i(location.href),t.removeAsFragment()}var Te="data-mu-style",at=String(Math.random()*1e6|0),ct=0;function lt(e){const t=new CSSStyleSheet,n=at+"-"+ ++ct;for(const[r,i]of Object.entries(e)){const c=`[${Te}="${n}"]`,h=`${c}:is(${r}), ${c} :is(${r}) {}`;t.insertRule(h,0);const y=t.cssRules.item(0);Object.assign(y.style,i)}return document.adoptedStyleSheets.push(t),{$muType:"attribute",name:Te,value:n}}function ft(e,t=10){return ne(e,t)}function ne(e,t){if(t<0)throw Error("Maximum depth exceeded.  Maybe there's a reference cycle?");if(typeof e!="object")return e;if(Array.isArray(e))return e.map(r=>ne(r,t-1));if(e.constructor&&e.constructor!==Object)throw Error("Can't clone objects with a prototype chain or instances of classes");return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ne(r,t-1)]))}var ut="0.23.1";export{xe as ForEach,Ee as ForEachPersist,ot as PromiseLoader,ye as PropReference,it as Router,te as Swapper,me as Tracker,et as child,rt as choose,x as createOrRetrievePropRef,P as defaultTracker,A as effect,Ve as element,B as isTracked,lt as makeLocalStyle,He as track,ft as untrackedClone,ut as version};
