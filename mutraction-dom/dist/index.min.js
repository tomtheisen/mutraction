"use strict";var A=Symbol("RecordMutation"),V=Symbol("TrackerOf"),q=Symbol("ProxyOf"),O=Symbol("RecordDependency"),Z=Symbol("GetOriginal"),$=Symbol("AccessPath"),P=Symbol("items");function je(e){return{get(t,n,r){if(!(t instanceof Set))throw Error("Expected Set target in proxy.");const i=v(t,P);switch(n){case V:return e;case Z:return t;case"size":return e[O](i),t.size;case"has":case"entries":case"keys":case"values":case"forEach":case Symbol.iterator:return function(){return e[O](i),t[n](...arguments)};case"add":return function(c){if(c=z(c,e)??c,B(c,L(t),"\u2203"),t.has(c))return;const f=t.add(c);return e[A]({type:"setadd",name:P,target:t,timestamp:new Date,newValue:c}),f};case"delete":return function(c){if(c=z(c,e)??c,!t.has(c))return;const f=t.delete(c);return e[A]({type:"setdelete",name:P,target:t,timestamp:new Date,oldValue:c}),f};case"clear":return function(){if(t.size===0)return;const c=Array.from(t.values());t.clear(),e[A]({type:"setclear",name:P,target:t,timestamp:new Date,oldValues:c})};default:return Reflect.get(t,n,r)}}}}function Ne(e){return{get(t,n,r){if(!(t instanceof Map))throw Error("Expected Map target in proxy.");const i=v(t,P);switch(n){case V:return e;case Z:return t;case"size":return e[O](i),t.size;case"has":case"keys":case"values":case"entries":case Symbol.iterator:return function(){return e[O](i),t[n](...arguments)};case"get":return function(c){e[O](i);const f=t.get(c);return typeof f=="object"&&f&&W(f)&&B(f,L(t),`get(${c})`),f};case"set":return function(c,f){me(c);const h=t.has(c),y=h&&t.get(c),o=z(f,e);o&&B(o,L(t),`get(${c})`),t.set(c,f=o??f);const s=h?{target:t,name:P,timestamp:new Date,type:"mapchange",key:c,newValue:f,oldValue:y}:{target:t,name:P,timestamp:new Date,type:"mapcreate",key:c,newValue:f};return e[A](s),r};case"delete":return function(c){const f=t.get(c);if(!t.delete(c))return!1;const h={target:t,name:P,timestamp:new Date,type:"mapdelete",key:c,oldValue:f};return e[A](h),!0};case"clear":return function(){const c=Array.from(t.entries());t.clear();const f={target:t,name:P,timestamp:new Date,type:"mapclear",oldEntries:c};e[A](f)};default:return Reflect.get(t,n,r)}}}}function me(e){if(e&&typeof e=="object"&&!Object.isFrozen(e))throw Error("In order to apply tracking proxy, Map keys must be immutable or frozen.")}var Fe=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"];function We(e){return typeof e=="string"?be(e):typeof e=="number"&&(e&2147483647)===e}function be(e){return typeof e!="string"||!/^\d{1,10}$/.test(e)?!1:parseInt(e,10)<2147483647}function Ie(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function Ve(e,t){Object.defineProperty(e,q,{enumerable:!1,writable:!0,configurable:!1,value:t})}function ee(e){return e[q]}var ge=new Set([RegExp,Promise]);"window"in globalThis&&ge.add(globalThis.window.constructor);function J(e){return!(e==null||typeof e!="object"||W(e)||!Object.isExtensible(e)||ge.has(e.constructor))}function z(e,t){if(typeof e!="object"||!e)return;if(W(e))return e;const n=ee(e);if(n){if(n[V]!==t)throw Error("Object cannot be tracked by multiple tracker instances");return n}if(J(e))return t.track(e)}function L(e){return e[$]}function B(e,t,n){const r=t?t+"."+String(n):String(n);Object.assign(e,{[$]:r})}function $e(e,t){if(!J(e))throw Error("This object type cannot be proxied");if(e instanceof Set)return je(t);if(e instanceof Map)return Ne(t);function n(o,s,l){if(s===V)return t;if(s===Z)return o;if(s===$)return o[s];t[O](v(o,s));let u=Reflect.get(o,s,l);u&&typeof u=="object"&&T&&B(u,L(o),s);const d=z(u,t);if(d)u=o[s]=d;else if(typeof u=="function"&&t.options.autoTransactionalize&&s!=="constructor"){let k=function(){const M=t.startTransaction(S.name??"auto");try{return S.apply(l,arguments)}finally{M.operations.length>0?t.commit(M):t.rollback(M)}};var m=k;const S=u;return k}return u}function r(o,s,l){if(typeof s=="string"&&Fe.includes(s)){let d=function(){const k=t.startTransaction(String(s)),S=m.apply(l,arguments);return t.commit(k),S};var u=d;const m=o[s];return d}else return n(o,s,l)}let i=0;function a(o,s,l,u){if(s===$)return Reflect.set(o,$,l);l&&typeof l=="object"&&T&&B(l,L(o),s),l=z(l,t)??l;const d=s in o?{type:"change",target:o,name:s,oldValue:e[s],newValue:l,timestamp:new Date}:{type:"create",target:o,name:s,newValue:l,timestamp:new Date},m=i,k=Reflect.set(o,s,l,u);return k&&m==i++&&t[A](d),k}function c(o,s,l,u){if(!Array.isArray(o))throw Error("This object used to be an array.  Expected an array.");if(s==="length"){We(l)||(o.length=l);const d=o.length,m=parseInt(l,10);if(m<d){const k=Object.freeze(o.slice(m,d)),S={type:"arrayshorten",target:o,name:s,oldLength:d,newLength:m,removed:k,timestamp:new Date},M=Reflect.set(o,s,l,u);return t[A](S),++i,M}}if(be(s)){const d=parseInt(s,10);if(d>=o.length){const m={type:"arrayextend",target:o,name:s,oldLength:o.length,newIndex:d,newValue:l,timestamp:new Date},k=Reflect.set(o,s,l,u);return t[A](m),++i,k}}return a(o,s,l,u)}function f(o,s){const l={type:"delete",target:o,name:s,oldValue:e[s],timestamp:new Date},u=Reflect.deleteProperty(o,s);return u&&t[A](l),u}let h=a,y=n;if(Array.isArray(e)&&(h=c,y=r),Ie(e))throw Error("Tracking of exotic arguments objects not supported");return{get:y,set:h,deleteProperty:f}}function W(e){return typeof e=="object"&&!!e[V]}var ze=class{get sizeBound(){return this.#e}#e=0;get generation(){return this.#t}#t=0;items=new Map;registry=new FinalizationRegistry(e=>{--this.#e,this.items.delete(e),++this.#t});add(e){this.registry.register(e,this.#e),this.items.set(this.#e++,new WeakRef(e)),++this.#t}*[Symbol.iterator](){for(const e of this.items.values()){const t=e.deref();t&&(yield t)}}},te=new ze;function Be(){if(!te)throw Error("Only allowed in debug mode");return te}var we=class{object;prop;#e=new Set;#t=!1;get subscribers(){return this.#e}constructor(e,t){!W(e)&&e[q]&&(e=e[q]),this.object=e,this.prop=t,te?.add(this)}subscribe(e){return this.#e.add(e),{dispose:()=>this.#e.delete(e)}}notifySubscribers(){this.#t&&console.warn(`Re-entrant property subscription for '${String(this.prop)}'`);const e=Array.from(this.#e);this.#t=!0;for(const t of e)t.notifySubscribers(this);this.#t=!1}get current(){return this.object[this.prop]}set current(e){this.object[this.prop]=e}},ke=new WeakMap;function v(e,t){let n=ke.get(e);n||ke.set(e,n=new Map);let r=n.get(t);return r||n.set(t,r=new we(e,t)),r}var ne="mu:debugMode",He=250,T="sessionStorage"in globalThis&&!!sessionStorage.getItem(ne);if("sessionStorage"in globalThis){let e=function(){sessionStorage.setItem(ne,"true"),location.reload()},t=function(){sessionStorage.removeItem(ne),location.reload()};if(Xe=e,Ye=t,Object.assign(window,{[Symbol.for("mutraction.debug")]:e}),["localhost","127.0.0.1","[::1]"].includes(location.hostname)&&!T&&(console.info("[\xB5] Try the mutraction diagnostic tool.  This message is only shown from localhost, but the tool is always available."),console.info("\xBB window[Symbol.for('mutraction.debug')]()")),T){let n=function(p){return Array.isArray(p)?`Array(${p.length})`:typeof p=="object"?"{ ... }":typeof p=="function"?p.name?`${p.name}() { ... }`:"() => { ... }":JSON.stringify(p)},r=function(p,x,...g){const b=document.createElement(p);return b.style.all="revert",Object.assign(b.style,x),b.append(...g),b},i=function(p){const x=Array.from(p.childNodes).filter(g=>g instanceof Text).flatMap(g=>Se(g)).filter(Boolean).map(g=>g);return(Se(p)??[]).concat(...x)},a=function(p){const x=L(p.object),g=x?x+"."+String(p.prop):String(p.prop),b=p.current,w=n(b),R=!b||typeof b!="object"&&typeof b!="function",I=r("span",R?{cursor:"pointer",textDecoration:"underline"}:{},w),F=p.subscribers.size,Le=`(${F} ${F===1?"subscriber":"subscribers"})`,Ce=r("li",{},r("code",{},g),": ",I," ",Le);return R&&I.addEventListener("click",()=>{const ye=prompt(`Update ${String(p.prop)}`,w);try{ye&&(p.current=JSON.parse(ye)),c()}catch{}}),Ce},c=function(){const p=[];for(const x of G)p.push(a(x));pe.replaceChildren(...p)},f=function(){N.disabled=!0,N.textContent="\u2026",U.textContent="(choose)";let p,x="";function g(b){if(b.target instanceof HTMLElement){let w=b.target;for(;w&&(i(w)?.length??0)===0;)w=w.parentElement;w!=p&&(p&&(p.style.boxShadow=x),x=w?.style.boxShadow??"",w&&(w.style.boxShadow?w.style.boxShadow+=", inset #f0f4 0 99vmax":w.style.boxShadow+="inset #f0f4 0 99vmax"),p=w)}b.stopPropagation()}document.addEventListener("mousemove",g,{capture:!0}),document.addEventListener("click",b=>{if(b.stopPropagation(),b.preventDefault(),N.disabled=!1,N.textContent="\u{1F50D}",document.removeEventListener("mousemove",g,{capture:!0}),p){p.style.boxShadow=x,U.textContent=p.tagName.toLowerCase();const w=i(p),R=new Set(w.flatMap(F=>F.trackedProperties)),I=[];for(const F of R)I.push(a(F));Y.replaceChildren(...I)}else U.textContent="(none)",Y.replaceChildren()},{capture:!0,once:!0})},h=function(){const{x:p,y:x,width:g,height:b}=s.getBoundingClientRect(),w=Math.max(0,Math.min(window.innerHeight-b,x)),R=Math.max(0,Math.min(window.innerWidth-g,p));s.style.top=w+"px",s.style.left=R+"px"};Ge=n,Ue=r,qe=i,Je=a,Ke=c,_e=f,Qe=h;const y=[];let o=0;throw Error("NIE")}}var Ge,Ue,qe,Je,Ke,_e,Qe,Xe,Ye,Ze=class{#e=new Map;#t;#n=new Set;active=!0;constructor(e){this.#t=e}get trackedProperties(){return Array.from(this.#e.keys())}addDependency(e){if(this.active){if(this.#e.has(e))return;const t=e.subscribe(this);this.#e.set(e,t)}}subscribe(e){return this.#n.add(e),{dispose:()=>this.#n.delete(e)}}notifySubscribers(e){const t=Array.from(this.#n);for(const n of t)n(e)}endDependencyTrack(){this.#t.endDependencyTrack(this)}untrackAll(){for(const e of this.#e.values())e.dispose();this.#e.clear()}};function et({operations:e}){for(let t=0;t<e.length;){const n=e[t];if(n.type==="transaction")e.splice(t,1,...n.operations);else if(n.type==="change"&&Object.is(n.oldValue,n.newValue))e.splice(t,1);else if(t>0){const r=e[t-1];if(r.type==="transaction")throw Error("Internal mutraction error.  Found internal transaction on look-back during packTransaction.");r.target!==n.target||r.name!==n.name?++t:r.type==="create"&&n.type==="change"?e.splice(--t,2,{...r,newValue:n.newValue}):r.type==="create"&&n.type==="delete"?e.splice(--t,2):r.type==="change"&&n.type==="change"?e.splice(--t,2,{...r,newValue:n.newValue}):r.type==="change"&&n.type==="delete"?e.splice(--t,2,{...n,oldValue:r.oldValue}):r.type==="delete"&&n.type==="create"?e.splice(--t,2,{...n,...r,type:"change"}):r.type==="setadd"&&n.type==="setdelete"&&Object.is(r.newValue,n.oldValue)||r.type==="setdelete"&&n.type==="setadd"&&Object.is(r.oldValue,n.newValue)?e.splice(--t,2):r.type==="mapcreate"&&n.type==="mapchange"&&r.key===n.key?e.splice(--t,2,{...r,newValue:n.newValue}):r.type==="mapcreate"&&n.type==="mapdelete"&&r.key===n.key?e.splice(--t,2):r.type==="mapchange"&&n.type==="mapchange"&&r.key===n.key?e.splice(--t,2,{...n,newValue:n.newValue}):r.type==="mapchange"&&n.type==="mapdelete"&&r.key===n.key?e.splice(--t,2,{...n,oldValue:r.oldValue}):r.type==="mapdelete"&&n.type==="mapcreate"&&r.key===n.key?e.splice(--t,2,{...n,...r,type:"mapchange"}):++t}else++t}}var xe={autoTransactionalize:!0,compactOnCommit:!0},ve=class{#e;#t=[];#n=[];options=xe;#s;constructor(e={}){this.setOptions(e)}setOptions(e={}){this.options=Object.freeze({...xe,...e})}track(e){if(W(e))throw Error("Object already tracked");nt(e,this);const t=new Proxy(e,$e(e,this));return Ve(e,t),t}trackAsReadonlyDeep(e){return this.track(e)}startTransaction(e){return this.#e={type:"transaction",parent:this.#e,operations:[],dependencies:new Set,timestamp:new Date},e&&(this.#e.transactionName=e),this.#e}commit(e){if(!this.#e)throw Error("Attempted to commit transaction when none were open.");if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.options.compactOnCommit&&et(this.#e),this.#e.parent)this.#e.parent.operations.push(this.#e),this.#e.dependencies.forEach(t=>this.#e.parent.dependencies.add(t)),this.#e=this.#e.parent;else{const t=new Set;for(const n of this.#e.dependencies)for(const r of n.subscribers)t.add(r);for(const n of t)n.notifySubscribers();this.#e=void 0}this.#e==null&&this.#s?.notifySubscribers()}rollback(e){if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(!this.#e)throw Error("No transaction to rollback.");for(;this.#e.operations.length;)this.undo();this.#e=this.#e.parent}undo(){const e=this.#e?.operations?.pop();if(!e)throw Error("There must be an open transaction to undo.");this.#i(e),this.#t.unshift(e),this.#e==null&&this.#s?.notifySubscribers()}#i(e){if(e.type==="transaction")for(let t=e.operations.length;t-- >0;)this.#i(e.operations[t]);else{const t=e.target;switch(e.type){case"change":case"delete":t[e.name]=e.oldValue;break;case"create":delete t[e.name];break;case"arrayextend":t.length=e.oldLength;break;case"arrayshorten":t.push(...e.removed);break;case"setadd":t.delete(e.newValue);break;case"setdelete":t.add(e.oldValue);break;case"setclear":e.oldValues.forEach(t.add.bind(t));break;case"mapcreate":t.delete(e.key);break;case"mapchange":case"mapdelete":t.set(e.key,e.oldValue);break;case"mapclear":e.oldEntries.forEach(([n,r])=>t.set(n,r));break;default:}this.#e||(v(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&v(e.target,"length").notifySubscribers())}}redo(){const e=this.#t.shift();e&&(this.#c(e),this.#e?.operations.push(e),this.#e==null&&this.#s?.notifySubscribers())}#c(e){if(e.type==="transaction")for(const t of e.operations)this.#c(t);else{const t=e.target;switch(e.type){case"change":case"create":t[e.name]=e.newValue;break;case"delete":delete t[e.name];break;case"arrayextend":t[e.newIndex]=e.newValue;break;case"arrayshorten":t.length=e.newLength;break;case"setadd":t.add(e.newValue);break;case"setdelete":t.delete(e.oldValue);break;case"setclear":t.clear();break;case"mapcreate":case"mapchange":t.set(e.key,e.newValue);break;case"mapdelete":t.delete(e.key);break;case"mapclear":t.clear();break;default:}this.#e||(v(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&v(e.target,"length").notifySubscribers())}}clearRedos(){this.#t.length=0}[A](e){T&&(e.targetPath=L(e.target)),this.#e?.operations.push(Object.freeze(e)),this.clearRedos(),this.#e?(this.#e.dependencies.add(v(e.target,e.name)),(e.type==="arrayextend"||e.type==="arrayshorten")&&this.#e.dependencies.add(v(e.target,"length"))):(v(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&v(e.target,"length").notifySubscribers(),this.#s?.notifySubscribers())}ignoreUpdates(e){const t=this.startDependencyTrack();t.active=!1,e(),t.endDependencyTrack()}startDependencyTrack(){const e=new Ze(this);return this.#n.unshift(e),e}endDependencyTrack(e){if(this.#n[0]!==e)throw Error("Specified dependency list is not top of stack");return this.#n.shift(),e}[O](e){this.#o?this.#r=e:this.#n[0]?.addDependency(e)}#o=!1;#r=void 0;getPropRef(e){const t=this.getPropRefTolerant(e);if(!t)throw Error("No tracked properties.  Prop ref detection requires a tracked object.");return t}getPropRefTolerant(e){if(this.#o)throw Error("Cannot be called re-entrantly.");this.#o=!0,this.#r=void 0;try{const t=e();if(!this.#r)return;const n=this.#r.current;return Object.is(t,n)||console.error("The last operation of the callback must be a property get.\n`(foo || bar).quux` is allowed, but `foo.bar + 1` is not"),this.#r}finally{this.#o=!1}}},K=new ve;function tt(e){return K.track(e)}function nt(e,t){if(e instanceof Set){const n=Array.from(e);for(const r of n){const i=ee(r);i?(e.delete(r),e.add(i)):J(r)&&(e.delete(r),e.add(t.track(r)))}}else if(e instanceof Map){const n=Array.from(e);for(const[r,i]of n){me(r);const a=ee(i);a?e.set(r,a):J(i)&&e.set(r,t.track(i))}}}var rt={dispose:()=>{}},re=0,C=new Map;function st(e){const t=e.name||"(anonymous)",n=C.get(t);n?C.set(t,n+1):C.set(t,1),++re}function ot(e){const t=e.name||"(anonymous)",n=C.get(t);!n||n<=1?C.delete(t):C.set(t,n-1),++re}function it(){return{activeEffects:C,generation:re}}function E(e,t={}){const{tracker:n=K,suppressUntrackedWarning:r=!1}=t;let i=n.startDependencyTrack(),a;try{a=e(i)}finally{i.endDependencyTrack()}if(i.trackedProperties.length===0)return r||console.warn("effect() callback has no dependencies on any tracked properties.  It will not fire again."),rt;T&&st(e);let c=i.subscribe(o),f=!1,h=!1;function y(){f&&console.error("Effect already disposed"),f=!0,i.untrackAll(),c.dispose(),!h&&T&&ot(e)}function o(s){typeof a=="function"&&a(),h=!0,y(),h=f=!1,i=n.startDependencyTrack(),a=e(i,s),i.endDependencyTrack(),c=i.subscribe(o)}return{dispose:y}}var se=new WeakMap;function j(e,t){const n=se.get(e);n?n.push(t):se.set(e,[t])}function H(e){se.get(e)?.forEach(n=>n.dispose()),e instanceof Element&&e.childNodes.forEach(H)}var _={suppressUntrackedWarning:!0};function ct(e){return e!=null&&typeof e=="object"&&"$muType"in e&&typeof e.$muType=="string"}function Ee(e,t){if(Array.isArray(t)){t.forEach(n=>Ee(e,n));return}if(!ct(t))throw Error("Expected a node modifier for 'mu:apply', but got "+typeof t);switch(t.$muType){case"attribute":e.setAttribute(t.name,t.value);break;default:throw Error("Unknown node modifier type: "+t.$muType)}}var oe=new WeakMap;function Q(e,t){if(t.trackedProperties.length===0)return;let n=oe.get(e);n||oe.set(e,n=[]),n.push(t)}function Se(e){return oe.get(e)}function at(e,t,n,...r){const i=document.createElement(e);i.append(...r);let a;for(let[o,s]of Object.entries(t))switch(o){case"mu:syncEvent":a=s;break;case"mu:apply":Ee(i,s);break;default:i[o]=s;break}const c=a?[]:void 0;for(let[o,s]of Object.entries(n)){if(c&&o in i){const l=K.getPropRefTolerant(s);l&&c.push([o,l])}switch(o){case"style":{let l=function(d){Object.assign(i.style,s()),T&&Q(i,d)};var f=l;const u=E(l,_);j(i,u);break}case"classList":{let l=function(d){const m=s();for(const[k,S]of Object.entries(m))i.classList.toggle(k,!!S);T&&Q(i,d)};var h=l;const u=E(l,_);j(i,u);break}default:{let l=function(d){i[o]=s(),T&&Q(i,d)};var y=l;const u=E(l,_);j(i,u);break}}}if(a&&c?.length)for(const o of a.matchAll(/\S+/g))i.addEventListener(o[0],()=>{for(const[s,l]of c)l.current=i[s]});return i}function lt(e){let t=document.createTextNode(""),n;return n=E(function(i){const a=e();if(a instanceof Node)i.untrackAll(),t=a;else{const c=document.createTextNode(String(a??""));n&&j(c,n),t.replaceWith(c),t=c,T&&Q(t,i)}},_),j(t,n),t}var D=class{static id=0;startMarker=document.createTextNode("");endMarker=document.createTextNode("");constructor(...e){document.createDocumentFragment().append(this.startMarker,...e,this.endMarker)}removeAsFragment(){if(this.startMarker.parentNode instanceof DocumentFragment)return this.startMarker.parentNode;const e=[];for(let n=this.startMarker;;n=n?.nextSibling){if(n==null)throw Error("End marker not found as subsequent document sibling as start marker");if(e.push(n),Object.is(n,this.endMarker))break}const t=document.createDocumentFragment();return t.append(...e),t}emptyAsFragment(){const e=[];for(let n=this.startMarker.nextSibling;;n=n?.nextSibling){if(n==null)throw Error("End marker not found as subsequent document sibling as start marker");if(Object.is(n,this.endMarker))break;e.push(n)}const t=document.createDocumentFragment();return t.append(...e),t}replaceWith(...e){this.emptyAsFragment(),this.append(...e)}append(...e){const t=document.createDocumentFragment();if(t.append(...e),!this.endMarker.parentNode)throw Error("End marker of ElementSpan has no parent");this.endMarker.parentNode.insertBefore(t,this.endMarker)}registerCleanup(e){j(this.startMarker,e)}cleanup(){H(this.startMarker);for(const e of this.emptyAsFragment().childNodes)H(e)}};function Ae(e){return e!=null&&typeof e=="object"&&"node"in e&&e.node instanceof Node}function ie(e){const t=new D,n=E(function(i){for(const c of t.emptyAsFragment().childNodes)H(c);const a=e();if(Ae(a))return t.replaceWith(a.node),a.cleanup;if(a!=null){t.replaceWith(a);return}});return t.registerCleanup(n),t.removeAsFragment()}var X={suppressUntrackedWarning:!0};function Te(e,t){if(typeof e=="function")return ie(()=>Te(e(),t));const n=new D,r=[],i=e??[],a=E(function(h){for(let y=r.length;y<i.length;y++){const o={container:new D};r.push(o),o.subscription=E(function(l){const u=i[y],d=u!==void 0?t(u,y,i):document.createTextNode("");return Ae(d)?(o.container.replaceWith(d.node),o.cleanup=d.cleanup):d!=null&&(o.container.replaceWith(d),o.cleanup=void 0),()=>{o.cleanup?.(),o.container.cleanup()}},X),n.append(o.container.removeAsFragment())}for(;r.length>i.length;)c(r.pop())},X);return n.registerCleanup({dispose(){r.forEach(c)}}),n.registerCleanup(a),n.removeAsFragment();function c({cleanup:f,container:h,subscription:y}){f?.(),y?.dispose(),h.removeAsFragment(),h.cleanup()}}function Pe(e,t){if(typeof e=="function")return ie(()=>Pe(e(),t));const n=new D,r=[],i=new WeakMap,a=e??[],c=E(function(y){for(let o=r.length;o<a.length;o++){const s={container:new D};r.push(s),s.subscription=E(function(u){const d=a[o];if(d==null)return;if(typeof d!="object")throw Error("Elements must be object in ForEachPersist");let m=i.get(d);if(m==null){u&&(u.active=!1);try{const k=t(d);m=k instanceof HTMLElement?k:new D(k),i.set(d,m)}finally{u&&(u.active=!0)}}else(m instanceof HTMLElement?m.isConnected:m.startMarker.isConnected)&&console.error("ForEachPersist encountered the same object twice in the same array.");return m instanceof HTMLElement?s.container.replaceWith(m):m!=null&&s.container.replaceWith(m.removeAsFragment()),()=>s.container.emptyAsFragment()},X),n.append(s.container.removeAsFragment())}for(;r.length>a.length;)f(r.pop())},X);return n.registerCleanup({dispose(){r.forEach(f)}}),n.registerCleanup(c),n.removeAsFragment();function f(h){const{container:y,subscription:o}=h;o?.dispose(),y.removeAsFragment(),y.cleanup()}}var ft={suppressUntrackedWarning:!0};function pt(){return document.createTextNode("")}function ut(...e){let t,n,r=!1;function i(){r||a.dispose()}const a=E(function(){let f;for(const{nodeGetter:h,conditionGetter:y}of e)if(!y||y()){f=h;break}if(f??=pt,f!==n){t&&(r=!0,H(t),r=!1),n=f;const h=n();t?.replaceWith(h),j(h,{dispose:i}),t=h}},ft);if(!t)throw Error("Logical error in choose() for mu:if.  No element assigned after first effect invocation.");return t}function dt(e){return document.createTextNode(String(e))}function ht(e,t=document.createTextNode(""),n=dt){const r=new D(t);return e.then(i=>r.replaceWith(i)),e.catch(i=>r.replaceWith(typeof n=="function"?n(i):n)),r.removeAsFragment()}var De=new WeakMap;function yt(...e){if(e.some(a=>"pattern"in a&&a.pattern instanceof RegExp&&a.pattern.global))throw Error("Global-flagged route patterns not supported");const t=new D;let n,r=!1;function i(a){const{hash:c}=new URL(a);for(const f of e){let h,y=!1;if("pattern"in f?typeof f.pattern=="string"?y=c===f.pattern:y=!!(h=f.pattern.exec(c)??void 0):y=!0,y){r?n?.cleanup():n?.removeAsFragment(),n=void 0;const{element:o}=f;r=typeof o=="function";const s=typeof o=="function"?o(h):o;if(s instanceof DocumentFragment){let l=De.get(s);l||De.set(s,l=new D(s)),n=l,t.replaceWith(l.removeAsFragment())}else n=void 0,t.replaceWith(s);f.suppressScroll||window.scrollTo(0,0);return}}t.emptyAsFragment()}return window.addEventListener("hashchange",a=>i(a.newURL)),i(location.href),t.removeAsFragment()}var Me="data-mu-style",mt=String(Math.random()*1e6|0),bt=0;function gt(e){const t=new CSSStyleSheet,n=mt+"-"+ ++bt;for(const[r,i]of Object.entries(e)){const a=`[${Me}="${n}"]`,c=`${a}:is(${r}), ${a} :is(${r}) {}`;t.insertRule(c,0);const f=t.cssRules.item(0);Object.assign(f.style,i)}return document.adoptedStyleSheets.push(t),{$muType:"attribute",name:Me,value:n}}function wt(e,t=10){return ce(e,t)}function ce(e,t){if(t<0)throw Error("Maximum depth exceeded.  Maybe there's a reference cycle?");if(typeof e!="object")return e;if(Array.isArray(e))return e.map(r=>ce(r,t-1));if(e.constructor&&e.constructor!==Object)throw Error("Can't clone objects with a prototype chain or instances of classes");return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ce(r,t-1)]))}var kt="0.24.0";export{Te as ForEach,Pe as ForEachPersist,ht as PromiseLoader,we as PropReference,yt as Router,ie as Swapper,ve as Tracker,lt as child,ut as choose,v as createOrRetrievePropRef,K as defaultTracker,E as effect,at as element,W as isTracked,gt as makeLocalStyle,tt as track,wt as untrackedClone,kt as version};
