"use strict";var L=Symbol("RecordMutation"),K=Symbol("TrackerOf"),M=Symbol("ProxyOf"),ae=Symbol("RecordDependency"),Oe=Symbol("GetOriginal"),N=Symbol("AccessPath"),_="mu:debugMode",ce=250,E="sessionStorage"in globalThis&&!!sessionStorage.getItem(_);if("sessionStorage"in globalThis){let e=function(){sessionStorage.setItem(_,"true"),location.reload()},t=function(){sessionStorage.removeItem(_),location.reload()},r=function(a){return Array.isArray(a)?`Array(${a.length})`:typeof a=="object"?"{ ... }":JSON.stringify(a)},n=function(a,u,...p){const f=document.createElement(a);return f.style.all="revert",Object.assign(f.style,u),f.append(...p),f},i=function(a){const u=Array.from(a.childNodes).filter(p=>p instanceof Text).flatMap(p=>me(p)).filter(Boolean).map(p=>p);return(me(a)??[]).concat(...u)};if(Le=e,Me=t,Ne=r,je=n,Fe=i,Object.assign(window,{[Symbol.for("mutraction.debug")]:e}),["localhost","127.0.0.1","[::1]"].includes(location.hostname)&&!E&&(console.info("[\xB5] Try the mutraction diagnostic tool.  This message is only shown from localhost, but the tool is always available."),console.info("\xBB window[Symbol.for('mutraction.debug')]()")),E){let a=function(g){const S=B(g.object),T=S?S+"."+String(g.prop):String(g.prop),v=g.current,w=r(v),H=!v||typeof v!="object",C=n("span",H?{cursor:"pointer",textDecoration:"underline"}:{},w),D=g.subscribers.size,Te=`(${D} ${D===1?"subscriber":"subscribers"})`,Pe=n("li",{},n("code",{},T),": ",C," ",Te);return H&&C.addEventListener("click",()=>{const ie=prompt(`Update ${String(g.prop)}`,w);try{ie&&(g.current=JSON.parse(ie)),u()}catch{}}),Pe},u=function(){const g=[];for(const S of j)g.push(a(S));re.replaceChildren(...g)},p=function(){R.disabled=!0,R.textContent="\u2026",I.textContent="(choose)";let g,S="";function T(v){if(v.target instanceof HTMLElement){let w=v.target;for(;w&&(i(w)?.length??0)===0;)w=w.parentElement;w!=g&&(g&&(g.style.boxShadow=S),S=w?.style.boxShadow??"",w&&(w.style.boxShadow?w.style.boxShadow+=", inset #f0f4 0 99vmax":w.style.boxShadow+="inset #f0f4 0 99vmax"),g=w)}v.stopPropagation()}document.addEventListener("mousemove",T,{capture:!0}),document.addEventListener("click",v=>{if(v.stopPropagation(),v.preventDefault(),R.disabled=!1,R.textContent="\u{1F50D}",document.removeEventListener("mousemove",T,{capture:!0}),g){g.style.boxShadow=S,I.textContent=g.tagName.toLowerCase();const w=i(g),H=new Set(w.flatMap(D=>D.trackedProperties)),C=[];for(const D of H)C.push(a(D));J.replaceChildren(...C)}else I.textContent="(none)",J.replaceChildren()},{capture:!0,once:!0})};Re=a,De=u,Ce=p;const f=n("div",{position:"fixed",top:"50px",left:"50px",width:"30em",height:"20em",resize:"both",minHeight:"1.6em",minWidth:"15em",zIndex:"2147483647",background:"#eee",color:"#123",boxShadow:"#000 0em 0.5em 1em",border:"solid #345 0.4em",fontSize:"16px",display:"flex",flexDirection:"column",overflow:"auto"}),b=n("button",{marginRight:"1em"},"_");let s=!1;b.addEventListener("click",g=>{(s=!s)?(f.style.maxHeight="1.6em",f.style.maxWidth="15em"):(f.style.maxHeight="",f.style.maxWidth="")});const o=n("button",{float:"right"},"\xD7");o.addEventListener("click",t);const c=n("div",{fontWeight:"bold",background:"#123",color:"#eee",padding:"0.1em 1em",cursor:"grab"},o,b,"\u03BC diagnostics"),l=n("span",{},"0"),h=n("p",{},n("p",{},n("strong",{},"Active effects: "),l));setInterval(()=>{l.innerText=String(qe())},ce);const d=n("button",{},"Undo"),y=n("button",{},"Redo");queueMicrotask(()=>{const{trackHistory:g}=P.options;g||(d.disabled=y.disabled=!0)});const m=n("p",{},n("strong",{},"History: "),d,y);d.addEventListener("click",()=>P.undo()),y.addEventListener("click",()=>P.redo());const W=n("span",{},"0"),te=n("button",{},"\u21BB");te.addEventListener("click",u);const Ee=n("div",{},n("strong",{},"Live PropRefs: "),W," ",te),re=n("ol",{});let ne=-1;setInterval(()=>{j.generation!==ne&&(W.replaceChildren(String(j.sizeBound)),u(),ne=j.generation)},ce);const R=n("button",{},"\u{1F50D}");R.addEventListener("click",p);const I=n("span",{},"(none)"),J=n("ol",{}),Ae=n("div",{padding:"1em",overflow:"auto"},h,m,R," ",n("strong",{},"Inspected node:")," ",I,J,Ee,re);f.append(c,Ae),document.body.append(f);let se=0,oe=0;c.addEventListener("mousedown",g=>{const S=f.getBoundingClientRect();se=g.x-S.x,oe=g.y-S.y,window.addEventListener("mousemove",T),document.body.addEventListener("mouseup",v=>{window.removeEventListener("mousemove",T)},{once:!0}),g.preventDefault();function T(v){f.style.left=v.x-se+"px",f.style.top=v.y-oe+"px"}})}}var Re,De,Ce,Le,Me,Ne,je,Fe,We=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"];function Ie(e){return typeof e=="string"?le(e):typeof e=="number"&&(e&2147483647)===e}function le(e){return typeof e!="string"||!/^\d{1,10}$/.test(e)?!1:parseInt(e,10)<2147483647}function He(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function fe(e,t){Object.defineProperty(e,M,{enumerable:!1,writable:!0,configurable:!1}),e[M]=t}var pe=new Set([RegExp,Promise]);"window"in globalThis&&pe.add(globalThis.window.constructor);function Q(e){return!(e==null||typeof e!="object"||$(e)||!Object.isExtensible(e)||pe.has(e.constructor))}function B(e){return e[N]}function ue(e,t){Object.assign(e,{[N]:t})}function X(e,t){function r(s,o,c){if(o===K)return t;if(o===Oe)return s;if(o===N)return s[o];t[ae](k(s,o));let l=Reflect.get(s,o,c);if(l&&typeof l=="object"&&E){const d=B(s),y=d?d+"."+String(o):String(o);ue(l,y)}if(Q(l)){const d=l[M];if(d){if(d[K]!==t)throw Error("Object cannot be tracked by multiple tracker instances");l=d}else{const y=l,m=X(y,t);l=s[o]=new Proxy(y,m),fe(y,l)}}if(typeof l=="function"&&t.options.autoTransactionalize&&o!=="constructor"){let d=function(){const m=t.startTransaction(y.name??"auto");try{return y.apply(c,arguments)}finally{m.operations.length>0?t.commit(m):t.rollback(m)}};var h=d;const y=l;return d}return l}function n(s,o,c){if(typeof o=="string"&&We.includes(o)){let h=function(){const y=t.startTransaction(String(o)),m=d.apply(c,arguments);return t.commit(y),m};var l=h;const d=s[o];return h}else return r(s,o,c)}let i=0;function a(s,o,c,l){if(o===N)return Reflect.set(s,N,c);if(c&&typeof c=="object"&&E){const m=(B(s)??"~")+"."+String(o);ue(c,m)}if(Q(c)){const m=X(c,t);c=new Proxy(c,m)}const h=o in s?{type:"change",target:s,name:o,oldValue:e[o],newValue:c,timestamp:new Date}:{type:"create",target:s,name:o,newValue:c,timestamp:new Date},d=i,y=Reflect.set(s,o,c,l);return y&&d==i++&&t[L](h),y}function u(s,o,c,l){if(!Array.isArray(s))throw Error("This object used to be an array.  Expected an array.");if(o==="length"){Ie(c)||(s.length=c);const h=s.length,d=parseInt(c,10);if(d<h){const y=Object.freeze(s.slice(d,h)),m={type:"arrayshorten",target:s,name:o,oldLength:h,newLength:d,removed:y,timestamp:new Date},W=Reflect.set(s,o,c,l);return t[L](m),++i,W}}if(le(o)){const h=parseInt(o,10);if(h>=s.length){const d={type:"arrayextend",target:s,name:o,oldLength:s.length,newIndex:h,newValue:c,timestamp:new Date},y=Reflect.set(s,o,c,l);return t[L](d),++i,y}}return a(s,o,c,l)}function p(s,o){const c={type:"delete",target:s,name:o,oldValue:e[o],timestamp:new Date},l=Reflect.deleteProperty(s,o);return l&&t[L](c),l}let f=a,b=r;if(Array.isArray(e)&&(f=u,t.options.trackHistory&&(b=n)),He(e))throw Error("Tracking of exotic arguments objects not supported");return{get:b,set:f,deleteProperty:p}}function $(e){return typeof e=="object"&&!!e[K]}var Be=class{get sizeBound(){return this.#e}#e=0;get generation(){return this.#t}#t=0;items=new Map;registry=new FinalizationRegistry(e=>{--this.#e,this.items.delete(e),++this.#t});add(e){this.registry.register(e,this.#e),this.items.set(this.#e++,new WeakRef(e)),++this.#t}*[Symbol.iterator](){for(const e of this.items.values()){const t=e.deref();t&&(yield t)}}},j=E?new Be:null,de=class{object;prop;#e=new Set;#t=!1;get subscribers(){return this.#e}constructor(e,t){!$(e)&&e[M]&&(e=e[M]),this.object=e,this.prop=t,j?.add(this)}subscribe(e){return this.#e.add(e),{dispose:()=>this.#e.delete(e)}}notifySubscribers(){this.#t&&console.warn(`Re-entrant property subscription for '${String(this.prop)}'`);const e=Array.from(this.#e);this.#t=!0;for(const t of e)t.notifySubscribers(this);this.#t=!1}get current(){return this.object[this.prop]}set current(e){this.object[this.prop]=e}},he=new WeakMap;function k(e,t){let r=he.get(e);r||he.set(e,r=new Map);let n=r.get(t);return n||r.set(t,n=new de(e,t)),n}var $e=class{#e=new Map;#t;#r=!1;#n=new Set;active=!0;constructor(e){this.#t=e}get trackedProperties(){return Array.from(this.#e.keys())}addDependency(e){if(this.active&&!this.#r){if(this.#e.has(e))return;const t=e.subscribe(this);this.#e.set(e,t)}}subscribe(e){return this.#n.add(e),{dispose:()=>this.#n.delete(e)}}notifySubscribers(e){const t=Array.from(this.#n);for(const r of t)r(e)}endDependencyTrack(){this.#t.endDependencyTrack(this)}trackAllChanges(){if(this.#r)return;this.untrackAll();const e=k(this.#t,"history");this.addDependency(e),this.#r=!0}untrackAll(){for(const e of this.#e.values())e.dispose();this.#e.clear()}};function ze({operations:e}){for(let t=0;t<e.length;){const r=e[t];if(r.type==="transaction")e.splice(t,1,...r.operations);else if(r.type==="change"&&Object.is(r.oldValue,r.newValue))e.splice(t,1);else if(t>0){const n=e[t-1];if(n.type==="transaction")throw Error("Internal mutraction error.  Found internal transaction on look-back during packTransaction.");n.target!==r.target||n.name!==r.name?++t:n.type==="create"&&r.type==="change"?e.splice(--t,2,{...n,newValue:r.newValue}):n.type==="create"&&r.type==="delete"?e.splice(--t,2):n.type==="change"&&r.type==="change"?e.splice(--t,2,{...n,newValue:r.newValue}):n.type==="change"&&r.type==="delete"?e.splice(--t,2,{...r,oldValue:n.oldValue}):n.type==="delete"&&r.type==="create"?e.splice(--t,2,{...r,...n,type:"change"}):++t}else++t}}var ye={trackHistory:!0,autoTransactionalize:!0,compactOnCommit:!0},ge=class{#e;#t;#r=[];#n=!1;#s=[];options=ye;#o;constructor(e={}){this.setOptions(e)}setOptions(e={}){if(this.#n)throw Error("Cannot change options for a tracker that has already started tracking");e.trackHistory===!1&&(e.compactOnCommit=!1,e.autoTransactionalize??=!1);const t={...ye,...e};if(t.compactOnCommit&&!t.trackHistory)throw Error("Option compactOnCommit requires option trackHistory");t.trackHistory?this.#t=[]:this.#t=void 0,this.options=Object.freeze(t)}track(e){if($(e))throw Error("Object already tracked");if(this.#n=!0,!Q)throw Error("This object type cannot be proxied");const t=new Proxy(e,X(e,this));return fe(e,t),t}trackAsReadonlyDeep(e){return this.track(e)}#a(){if(!this.options.trackHistory)throw Error("History tracking disabled.")}get history(){if(this.#a(),this.#s[0]?.trackAllChanges(),this.#o??=k(this,"history"),!this.#t)throw Error("History tracking enabled, but no root transaction. Probably mutraction internal error.");return this.#t}startTransaction(e){return this.#e={type:"transaction",parent:this.#e,operations:[],dependencies:new Set,timestamp:new Date},e&&(this.#e.transactionName=e),this.#e}commit(e){if(!this.#e)throw Error("Attempted to commit transaction when none were open.");if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.options.compactOnCommit&&ze(this.#e),this.#e.parent)this.#e.parent.operations.push(this.#e),this.#e.dependencies.forEach(t=>this.#e.parent.dependencies.add(t)),this.#e=this.#e.parent;else{this.#t?.push(this.#e);const t=new Set;for(const r of this.#e.dependencies)for(const n of r.subscribers)t.add(n);for(const r of t)r.notifySubscribers();this.#e=void 0}this.#e==null&&this.#o?.notifySubscribers()}rollback(e){if(e&&e!==this.#e)throw Error("Attempted to commit wrong transaction. Transactions must be resolved in stack order.");if(this.#e){for(;this.#e.operations.length;)this.undo();this.#e=this.#e.parent}else for(;this.#t?.length;)this.undo()}undo(){this.#a();const e=(this.#e?.operations??this.#t).pop();e&&(this.#l(e),this.#r.unshift(e),this.#e==null&&this.#o?.notifySubscribers())}#l(e){if(e.type==="transaction")for(let t=e.operations.length;t-- >0;)this.#l(e.operations[t]);else{const t=e.target;switch(e.type){case"change":case"delete":t[e.name]=e.oldValue;break;case"create":delete t[e.name];break;case"arrayextend":t.length=e.oldLength;break;case"arrayshorten":t.push(...e.removed);break;default:}this.#e||(k(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&k(e.target,"length").notifySubscribers())}}redo(){this.#a();const e=this.#r.shift();e&&(this.#f(e),(this.#e?.operations??this.#t).push(e),this.#e==null&&this.#o?.notifySubscribers())}#f(e){if(e.type==="transaction")for(const t of e.operations)this.#f(t);else{const t=e.target;switch(e.type){case"change":case"create":t[e.name]=e.newValue;break;case"delete":delete t[e.name];break;case"arrayextend":t[e.newIndex]=e.newValue;break;case"arrayshorten":t.length=e.newLength;break;default:}this.#e||(k(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&k(e.target,"length").notifySubscribers())}}clearRedos(){this.#r.length=0}clearHistory(){this.#a(),this.#e=void 0,this.#t.length=0,this.clearRedos()}[L](e){this.options.trackHistory&&(E&&(e.targetPath=B(e.target)),(this.#e?.operations??this.#t).push(Object.freeze(e))),this.clearRedos(),this.#e?(this.#e.dependencies.add(k(e.target,e.name)),(e.type==="arrayextend"||e.type==="arrayshorten")&&this.#e.dependencies.add(k(e.target,"length"))):(k(e.target,e.name).notifySubscribers(),(e.type==="arrayextend"||e.type==="arrayshorten")&&k(e.target,"length").notifySubscribers(),this.#o?.notifySubscribers())}ignoreUpdates(e){const t=this.startDependencyTrack();t.active=!1,e(),t.endDependencyTrack()}startDependencyTrack(){const e=new $e(this);return this.#s.unshift(e),e}endDependencyTrack(e){if(this.#s[0]!==e)throw Error("Specified dependency list is not top of stack");return this.#s.shift(),e}[ae](e){this.#c?this.#i=e:this.#s[0]?.addDependency(e)}#c=!1;#i=void 0;getPropRef(e){const t=this.getPropRefTolerant(e);if(!t)throw Error("No tracked properties.  Prop ref detection requires a tracked object.");return t}getPropRefTolerant(e){if(this.#c)throw Error("Cannot be called re-entrantly.");this.#c=!0,this.#i=void 0;try{const t=e();if(!this.#i)return;const r=this.#i.current;return Object.is(t,r)||console.error("The last operation of the callback must be a property get.\n`(foo || bar).quux` is allowed, but `foo.bar + 1` is not"),this.#i}finally{this.#c=!1}}},P=new ge;function Ue(e){return P.track(e)}var Ge={dispose:()=>{}},z=0;function qe(){return z}function x(e,t={}){const{tracker:r=P,suppressUntrackedWarning:n=!1}=t;let i=r.startDependencyTrack(),a;try{a=e(i)}finally{i.endDependencyTrack()}if(i.trackedProperties.length===0)return n||console.warn("effect() callback has no dependencies on any tracked properties.  It will not fire again."),Ge;++z;let u=i.subscribe(b),p=!1;function f(){p&&console.error("Effect already disposed"),p=!0,i.untrackAll(),u.dispose(),--z}function b(s){typeof a=="function"&&a(),f(),p=!1,i=r.startDependencyTrack(),a=e(i,s),i.endDependencyTrack(),u=i.subscribe(b),++z}return{dispose:f}}var Y=new WeakMap;function O(e,t){const r=Y.get(e);r?r.push(t):Y.set(e,[t])}function F(e){Y.get(e)?.forEach(r=>r.dispose()),e instanceof Element&&e.childNodes.forEach(F)}var U={suppressUntrackedWarning:!0};function Je(e){return e!=null&&typeof e=="object"&&"$muType"in e&&typeof e.$muType=="string"}function be(e,t){if(Array.isArray(t)){t.forEach(r=>be(e,r));return}if(!Je(t))throw Error("Expected a node modifier for 'mu:apply', but got "+typeof t);switch(t.$muType){case"attribute":e.setAttribute(t.name,t.value);break;default:throw Error("Unknown node modifier type: "+t.$muType)}}var Z=new WeakMap;function G(e,t){if(t.trackedProperties.length===0)return;let r=Z.get(e);r||Z.set(e,r=[]),r.push(t)}function me(e){return Z.get(e)}function Ke(e,t,r,...n){const i=document.createElement(e);i.append(...n);let a;for(let[s,o]of Object.entries(t))switch(s){case"mu:syncEvent":a=o;break;case"mu:apply":be(i,o);break;default:i[s]=o;break}const u=a?[]:void 0;for(let[s,o]of Object.entries(r)){if(u&&s in i){const c=P.getPropRefTolerant(o);c&&u.push([s,c])}switch(s){case"style":{let c=function(h){Object.assign(i.style,o()),E&&G(i,h)};var p=c;const l=x(c,U);O(i,l);break}case"classList":{let c=function(h){const d=o();for(const[y,m]of Object.entries(d))i.classList.toggle(y,!!m);E&&G(i,h)};var f=c;const l=x(c,U);O(i,l);break}default:{let c=function(h){i[s]=o(),E&&G(i,h)};var b=c;const l=x(c,U);O(i,l);break}}}if(a&&u?.length)for(const s of a.matchAll(/\S+/g))i.addEventListener(s[0],()=>{for(const[o,c]of u)c.current=i[o]});return i}function _e(e){let t=document.createTextNode(""),r;return r=x(function(i){const a=e();if(a instanceof Node)i.untrackAll(),t=a;else{const u=document.createTextNode(String(a??""));r&&O(u,r),t.replaceWith(u),t=u,E&&G(t,i)}},U),O(t,r),t}var A=class{static id=0;startMarker=document.createTextNode("");endMarker=document.createTextNode("");constructor(...e){document.createDocumentFragment().append(this.startMarker,...e,this.endMarker)}removeAsFragment(){if(this.startMarker.parentNode instanceof DocumentFragment)return this.startMarker.parentNode;const e=[];for(let r=this.startMarker;;r=r?.nextSibling){if(r==null)throw Error("End marker not found as subsequent document sibling as start marker");if(e.push(r),Object.is(r,this.endMarker))break}const t=document.createDocumentFragment();return t.append(...e),t}emptyAsFragment(){const e=[];for(let r=this.startMarker.nextSibling;;r=r?.nextSibling){if(r==null)throw Error("End marker not found as subsequent document sibling as start marker");if(Object.is(r,this.endMarker))break;e.push(r)}const t=document.createDocumentFragment();return t.append(...e),t}replaceWith(...e){this.emptyAsFragment(),this.append(...e)}append(...e){const t=document.createDocumentFragment();if(t.append(...e),!this.endMarker.parentNode)throw Error("End marker of ElementSpan has no parent");this.endMarker.parentNode.insertBefore(t,this.endMarker)}registerCleanup(e){O(this.startMarker,e)}cleanup(){F(this.startMarker);for(const e of this.emptyAsFragment().childNodes)F(e)}};function we(e){return e!=null&&typeof e=="object"&&"node"in e&&e.node instanceof Node}function V(e){const t=new A,r=x(function(i){for(const u of t.emptyAsFragment().childNodes)F(u);const a=e();if(we(a))return t.replaceWith(a.node),a.cleanup;if(a!=null){t.replaceWith(a);return}});return t.registerCleanup(r),t.removeAsFragment()}var q={suppressUntrackedWarning:!0};function ve(e,t){if(typeof e=="function")return V(()=>ve(e(),t));const r=new A,n=[],i=e??[],a=x(function(f){for(let b=n.length;b<i.length;b++){const s={container:new A};n.push(s),s.subscription=x(function(c){s.cleanup?.(),s.container.cleanup();const l=i[b],h=l!==void 0?t(l,b,i):document.createTextNode("");we(h)?(s.container.replaceWith(h.node),s.cleanup=h.cleanup):h!=null&&(s.container.replaceWith(h),s.cleanup=void 0)},q),r.append(s.container.removeAsFragment())}for(;n.length>i.length;)u(n.pop())},q);return r.registerCleanup({dispose(){n.forEach(u)}}),r.registerCleanup(a),r.removeAsFragment();function u({cleanup:p,container:f,subscription:b}){p?.(),b?.dispose(),f.removeAsFragment(),f.cleanup()}}function ke(e,t){if(typeof e=="function")return V(()=>ke(e(),t));const r=new A,n=[],i=new WeakMap,a=e??[],u=x(function(b){for(let s=n.length;s<a.length;s++){const o=new A;n.push(o),x(function(l){o.emptyAsFragment();const h=a[s];if(h==null)return;if(typeof h!="object")throw Error("Elements must be object in ForEachPersist");let d=i.get(h);if(d==null){l&&(l.active=!1);try{const y=t(h);d=y instanceof HTMLElement?y:new A(y),i.set(h,d)}finally{l&&(l.active=!0)}}d instanceof HTMLElement?o.replaceWith(d):d!=null&&o.replaceWith(d.removeAsFragment())},q),r.append(o.removeAsFragment())}for(;n.length>a.length;)p(n.pop())},q);return r.registerCleanup({dispose(){n.forEach(p)}}),r.registerCleanup(u),r.removeAsFragment();function p(f){f.removeAsFragment(),f.cleanup()}}var Qe={suppressUntrackedWarning:!0};function Xe(){return document.createTextNode("")}function Ye(...e){let t,r,n=!1;function i(){n||a.dispose()}const a=x(function(){let p;for(const{nodeGetter:f,conditionGetter:b}of e)if(!b||b()){p=f;break}if(p??=Xe,p!==r){t&&(n=!0,F(t),n=!1),r=p;const f=r();t?.replaceWith(f),O(f,{dispose:i}),t=f}},Qe);if(!t)throw Error("Logical error in choose() for mu:if.  No element assigned after first effect invocation.");return t}function Ze(e){return document.createTextNode(String(e))}function Ve(e,t=document.createTextNode(""),r=Ze){const n=new A(t);return e.then(i=>n.replaceWith(i)),e.catch(i=>n.replaceWith(typeof r=="function"?r(i):r)),n.removeAsFragment()}var Se=new WeakMap;function et(...e){if(e.some(a=>"pattern"in a&&a.pattern instanceof RegExp&&a.pattern.global))throw Error("Global-flagged route patterns not supported");const t=new A;let r,n=!1;function i(a){const{hash:u}=new URL(a);for(const p of e){let f,b=!1;if("pattern"in p?typeof p.pattern=="string"?b=u===p.pattern:b=!!(f=p.pattern.exec(u)??void 0):b=!0,b){n?r?.cleanup():r?.removeAsFragment(),r=void 0;const{element:s}=p;n=typeof s=="function";const o=typeof s=="function"?s(f):s;if(o instanceof DocumentFragment){let c=Se.get(o);c||Se.set(o,c=new A(o)),r=c,t.replaceWith(c.removeAsFragment())}else r=void 0,t.replaceWith(o);p.suppressScroll||window.scrollTo(0,0);return}}t.emptyAsFragment()}return window.addEventListener("hashchange",a=>i(a.newURL)),i(location.href),t.removeAsFragment()}var xe="data-mu-style",tt=String(Math.random()*1e6|0),rt=0;function nt(e){const t=new CSSStyleSheet,r=tt+"-"+ ++rt;for(const[n,i]of Object.entries(e)){const a=`[${xe}="${r}"]`,u=`${a}:is(${n}), ${a} :is(${n}) {}`;t.insertRule(u,0);const p=t.cssRules.item(0);Object.assign(p.style,i)}return document.adoptedStyleSheets.push(t),{$muType:"attribute",name:xe,value:r}}function st(e,t=10){return ee(e,t)}function ee(e,t){if(t<0)throw Error("Maximum depth exceeded.  Maybe there's a reference cycle?");if(typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>ee(n,t-1));if(e.constructor&&e.constructor!==Object)throw Error("Can't clone objects with a prototype chain or instances of classes");return Object.fromEntries(Object.entries(e).map(([r,n])=>[r,ee(n,t-1)]))}var ot="0.23.0";export{ve as ForEach,ke as ForEachPersist,Ve as PromiseLoader,de as PropReference,et as Router,V as Swapper,ge as Tracker,_e as child,Ye as choose,k as createOrRetrievePropRef,P as defaultTracker,x as effect,Ke as element,$ as isTracked,nt as makeLocalStyle,Ue as track,st as untrackedClone,ot as version};
